<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   Creating Keyboard Event Functions
  </title>
  <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../Resources/TableStyles/Description.css" rel="stylesheet" />
  <link href="../Resources/TableStyles/Keyword_Table.css" rel="stylesheet" />
  <link href="../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../idl_CSH.html#GuideMe/KeyboardEventFunctions.html" style="">
    Open topic with navigation
   </a>
  </p>
  <h1>
   Creating Keyboard Event Functions
  </h1>
  <p>
   You can create custom functions to handle keyboard events in a graphics
   <![CDATA[ ]]>
   <a href="../Reference Material/W/WINDOW.html" class="MCXref_0">
    WINDOW
   </a>
   or in a
   <a href="../Reference Material/W/WIDGET_WINDOW.html" class="MCXref_0">
    WIDGET_WINDOW
   </a>
   . These functions must use the syntax described below.
  </p>
  <p>
   Each function must return a value of 0 to turn off default event handling or 1 to perform default event handling.
  </p>
  <p>
   See the
   <a href="#Example" target="" title="" alt="" class="MCXref_0">
    Example &#160;
   </a>
   below.
  </p>
  <h2 class="API">
   Syntax
  </h2>
  <p>
   <i>
    Result
   </i>
   = FUNCTION_NAME(
   <em>
    Window
   </em>
   ,
   <em>
    IsASCII, Character, KeyValue, X
   </em>
   ,
   <em>
    Y
   </em>
   ,
   <em>
    Press
   </em>
   ,
   <em>
    Release
   </em>
   ,
   <em>
    KeyMods
   </em>
   )
  </p>
  <p>
   Where FUNCTION_NAME is a unique name for the function, which will be called from one of the keyboard event handling keywords of
   <![CDATA[ ]]>
   <a href="../Reference Material/W/WINDOW.html" class="MCXref_0">
    WINDOW
   </a>
   or
   <a href="../Reference Material/W/WIDGET_WINDOW.html" class="MCXref_0">
    WIDGET_WINDOW
   </a>
   . Avoid using generic names such as "KeyboardHandler" to prevent name collisions with other applications using event handlers.
  </p>
  <h2 class="API">
   Arguments
  </h2>
  <h3>
   Window
  </h3>
  <p>
   The ID of the window in which a keyboard event happened.
  </p>
  <h3>
   IsASCII
  </h3>
  <p>
   A scalar byte value that indicates whether the keyboard event corresponds to an ASCII character. If IsASCII is non-zero, the Character argument will be set to a byte value corresponding to the character of the pressed key. If IsASCII is zero, the KeySymbol argument will be set to a numeric value indicating the key that was pressed.
  </p>
  <h3>
   Character
  </h3>
  <p>
   If IsASCII is non-zero, this argument is set to a byte value corresponding to the ASCII character of the key that was pressed. Otherwise, this argument is set to zero.
  </p>
  <h3>
   <a name="KeyValue">
   </a>
   KeyValue
  </h3>
  <p>
   If IsASCII is zero, this argument is set to a value that indicates the key that was pressed. Otherwise, this argument is set to zero. Possible values are:
  </p>
  <table class="TableStyle-Keyword_Table" style="mc-table-style: url('../Resources/TableStyles/Keyword_Table.css');margin-left: 0;margin-right: auto;caption-side: top;" cellspacing="0">
   <col class="Column-Column1" />
   <col class="Column-Column1" />
   <thead>
    <tr class="Head-Header1">
     <th class="HeadE-Column1-Header1">
      Value
     </th>
     <th class="HeadD-Column1-Header1">
      Key
     </th>
    </tr>
   </thead>
   <tbody>
    <tr class="Body-Body1">
     <td class="BodyE-Column1-Body1">
      1
     </td>
     <td class="BodyD-Column1-Body1">
      Shift
     </td>
    </tr>
    <tr class="Body-Body2">
     <td class="BodyE-Column1-Body2">
      2
     </td>
     <td class="BodyD-Column1-Body2">
      Control
     </td>
    </tr>
    <tr class="Body-Body1">
     <td class="BodyE-Column1-Body1">
      3
     </td>
     <td class="BodyD-Column1-Body1">
      Caps lock
     </td>
    </tr>
    <tr class="Body-Body2">
     <td class="BodyE-Column1-Body2">
      4
     </td>
     <td class="BodyD-Column1-Body2">
      Alt
     </td>
    </tr>
    <tr class="Body-Body1">
     <td class="BodyE-Column1-Body1">
      5
     </td>
     <td class="BodyD-Column1-Body1">
      Left
     </td>
    </tr>
    <tr class="Body-Body2">
     <td class="BodyE-Column1-Body2">
      6
     </td>
     <td class="BodyD-Column1-Body2">
      Right
     </td>
    </tr>
    <tr class="Body-Body1">
     <td class="BodyE-Column1-Body1">
      7
     </td>
     <td class="BodyD-Column1-Body1">
      Up
     </td>
    </tr>
    <tr class="Body-Body2">
     <td class="BodyE-Column1-Body2">
      8
     </td>
     <td class="BodyD-Column1-Body2">
      Down
     </td>
    </tr>
    <tr class="Body-Body1">
     <td class="BodyE-Column1-Body1">
      9
     </td>
     <td class="BodyD-Column1-Body1">
      Page up
     </td>
    </tr>
    <tr class="Body-Body2">
     <td class="BodyE-Column1-Body2">
      10
     </td>
     <td class="BodyD-Column1-Body2">
      Page down
     </td>
    </tr>
    <tr class="Body-Body1">
     <td class="BodyE-Column1-Body1">
      11
     </td>
     <td class="BodyD-Column1-Body1">
      Home
     </td>
    </tr>
    <tr class="Body-Body2">
     <td class="BodyB-Column1-Body2">
      12
     </td>
     <td class="BodyA-Column1-Body2">
      End
     </td>
    </tr>
   </tbody>
  </table>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   On East Asian (Chinese, Japanese, Korean) localized Windows operating systems with an Asian language pack installed, characters entered in the Windows Input Method Manager (IMM)composition window are returned in the   the
   <i>
    KeyValue
   </i>
   argument as  unsigned integers representing a Wide character (Unicode value). The
   <a href="../Reference Material/I/I18N_WIDECHARTOMULTIBYTE.html">
    I18N_WIDECHARTOMULTIBYTE
   </a>
   routine can  convert these  characters to multibyte strings. For more information, see
   <a href="../Creating IDL Programs/Internationalizing Code.html">
    Internationalizing Code
   </a>
   .
  </p>
  <h3>
   X
  </h3>
  <p>
   The position to the right of the lower left corner of the drawable area, in device coordinates (pixels).
  </p>
  <h3>
   Y
  </h3>
  <p>
   The position above the lower left corner of the drawable area, in device coordinates (pixels).
  </p>
  <h3>
   Press
  </h3>
  <p>
   The value indicating that this event represents a key press. This argument is non-zero if the event is the result of pressing the key.
  </p>
  <h3>
   Release
  </h3>
  <p>
   The value indicating that this event represents a key release. This argument is non-zero if the event is the result of releasing the key.
  </p>
  <h3>
   KeyMods
  </h3>
  <p>
   The value containing a bitwise mask indicating which modifier keys are active at the time of the keyboard event. If a bit is zero, the key is up; if the bit is set, the key is pressed. The following table describes the bits in this bit mask. Possible values are:
  </p>
  <table style="caption-side: bottom;mc-table-style: url('../Resources/TableStyles/Description.css');margin-left: 0;margin-right: auto;" cellspacing="0" class="TableStyle_Description">
   <col />
   <col />
   <thead>
    <tr>
     <td class="TableStyle_Description_Head_0_0_RowSep_ColSep">
      <p>
       Value
      </p>
     </td>
     <td class="TableStyle_Description_Head_0_0_RowSep_ColEnd">
      <p>
       Modifier Key
      </p>
     </td>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
      <p>
       1
      </p>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
      <p>
       Shift
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
      <p>
       2
      </p>
     </td>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
      <p>
       Control
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
      <p>
       4
      </p>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
      <p>
       Caps lock
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_1_0_RowEnd_ColSep">
      <p>
       8
      </p>
     </td>
     <td class="TableStyle_Description_Body_1_0_RowEnd_ColEnd">
      <p>
       Alt
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="Example">
   </a>
   Example
   <span style="color: #ff0000; font-weight: bold;">
    &#160;
   </span>
  </h2>
  <p>
   In the following example code, the KeyboardEventsTestHandler function creates graphic element selections based on the keyboard character that is typed. Copy this code into a new IDL file and compile it. The
   <a href="#Rubber">
    example below
   </a>
   this one is a test that you can run to see these selections work.
  </p>
  <p>
   <img src="../Resources/Images/KeyboardEventHandler.jpg" style="width: 392px;height: 348px;" />
  </p>
  <p class="Code">
   FUNCTION KeyboardEventsTestHandler, Window, $
  </p>
  <p class="Code_Indented">
   IsASCII, Character, KeyValue, X, Y, Press, Release, KeyMods
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   print, 'KeyboardHandler'
  </p>
  <p class="Code_Indented">
   help, Window, $
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;IsASCII, Character, KeyValue, X, Y, Press, Release, KeyMods
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   IF Release then return, 1
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   graphics = Window.uValue
  </p>
  <p class="Code_Indented">
   graphics[0].select, /clear
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   FOREACH graphic, graphics do begin
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;CASE string(character) OF
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;'t': if ISA(graphic, 'TEXT') then graphic.select, /ADD
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;'c': if ISA(graphic, 'ELLIPSE') then graphic.select, /ADD
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;'l': if ISA(graphic, 'POLYLINE') then graphic.select, /ADD
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;'p': if ISA(graphic, 'POLYGON') then graphic.select, /ADD
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;ELSE:
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;ENDCASE
  </p>
  <p class="Code_Indented">
   ENDFOREACH
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   Window.refresh
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   RETURN, 0 ; Skip default event handling
  </p>
  <p class="Code">
   END
  </p>
  <h3>
   Keyboard Character Selection Example
  </h3>
  <p>
   Run the following code example to test the event handling functions defined in the previous code example.
  </p>
  <p class="Code">
   PRO KeyboardEventsTest
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   window = window()
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   text1=text(.2, .95, 'Type t to select text, c for circles, p for polygons, l for lines')
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   text2=text(.5, .8, 'Text 1')
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   text3=text(.5, .65, 'Text 2')
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   circle = ELLIPSE(500, 150, MAJOR=50, /device, $
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;FILL_COLOR="yellow")
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   x = indgen(200)+225
  </p>
  <p class="Code_Indented">
   y = SIN(2.0*FINDGEN(200)*!PI/25.0)*EXP(-0.02*FINDGEN(200))*100 + 150
  </p>
  <p class="Code_Indented">
   polygon = POLYGON(x, y, /device, $
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;/FILL_BACKGROUND, FILL_COLOR=!COLOR.LIGHT_STEEL_BLUE)
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   x = [100, 200, 200, 100, 100]
  </p>
  <p class="Code_Indented">
   y = [100, 100, 200, 200, 100]
  </p>
  <p class="Code_Indented">
   line = POLYLINE(x, y, /DEVICE)
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   window.uValue = [text1, text2, text3, circle, polygon, line]
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code_Indented">
   window.KEYBOARD_HANDLER='KeyboardEventsTestHandler'
  </p>
  <p class="Code_Indented">
   &#160;
  </p>
  <p class="Code">
   END
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>