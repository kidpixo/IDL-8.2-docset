<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Routines (alphabetical)|Routines: E" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   ERODE
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#Reference Material/E/ERODE.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../images/ref_part1.html">
    Routines (alphabetical)
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="E_list.html">
    Routines: E
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    ERODE
   </span>
  </div>
  <h1 class="Routine">
   <a name="E_841667181_989418">
   </a>
   <a name="E_841667181_36716">
   </a>
   ERODE
  </h1>
  <p madcap:conditions="Reference Material.Online_Help_Only">
   <madcap:conditionaltext madcap:conditions="Reference Material.Online_Help_Only">
    <a class="MCXref_Heading_0" href="#E_841667181_989427">
     Syntax
    </a>
    |
    <a class="MCXref_Heading_0" href="#E_841667181_996524">
     Return Value
    </a>
    |
    <a class="MCXref_Heading_0" href="#E_841667181_989429">
     Arguments
    </a>
    |
    <a class="MCXref_Heading_0" href="#E_841667181_989436">
     Keywords
    </a>
    |
    <a class="MCXref_Heading_0" href="#E_841667181_989470">
     Examples
    </a>
    |
    <a class="MCXref_Heading_0" href="#E_841667181_989516">
     Version History
    </a>
    |
    <a class="MCXref_Heading_0" href="#E_841667181_992768">
     See Also
    </a>
   </madcap:conditionaltext>
  </p>
  <p>
   The
   <a name="kanchor873">
   </a>
   ERODE function implements the
   <a name="kanchor874">
   </a>
   <a name="kanchor875">
   </a>
   erosion operator on binary and grayscale images and vectors. This operator is commonly known as “
   <a name="kanchor876">
   </a>
   shrink” or “
   <a name="kanchor877">
   </a>
   reduce”.
  </p>
  <h3>
   <a name="E_841667181_989448_PageTOC_ERODE_">
   </a>
   <a name="E_841667181_58413">
   </a>
   Using ERODE
  </h3>
  <p>
   See the description of the
   <a class="MCXref_Heading_0" href="../D/DILATE.html#D_843829869_747869">
    DILATE
   </a>
   function for background on morphological operators. Erosion is the dual of dilation. It does to the background what dilation does to the foreground. Briefly, given an
   <i>
    Image
   </i>
   and a structuring element,
   <i>
    Structure
   </i>
   , the ERODE function can be used to remove islands smaller than the structuring element.
  </p>
  <p>
   Over each pixel of the image, the origin of the structuring element is overlaid. If each nonzero element of the structuring element is contained in the image, the output pixel is set to one. Letting
   <i>
    A
   </i>
   <span class="Symbol">
    Ä
   </span>
   <i>
    B
   </i>
   represent the erosion of an image
   <i>
    A
   </i>
   by structuring element
   <i>
    B
   </i>
   , erosion can be defined as:
  </p>
  <p style="text-align: center;">
   <img src="../../images/11_1.jpg" />
  </p>
  <p>
   where
   <i>
    (A)
   </i>
   <sub>
    -b
   </sub>
   represents the translation of
   <i>
    A
   </i>
   by
   <i>
    b
   </i>
   . The structuring element
   <i>
    B
   </i>
   can be visualized as a probe that slides across image
   <i>
    A
   </i>
   , testing the spatial nature of
   <i>
    A
   </i>
   at each point. If
   <i>
    B
   </i>
   translated by
   <i>
    i,j
   </i>
   can be contained in
   <i>
    A
   </i>
   (by placing the origin of
   <i>
    B
   </i>
   at
   <i>
    i,j
   </i>
   ), then
   <i>
    i,j
   </i>
   belongs to the erosion of
   <i>
    A
   </i>
   by
   <i>
    B
   </i>
   . For example:
  </p>
  <p style="text-align: center;">
   <img src="../../images/11_2.jpg" />
  </p>
  <p>
   In this example, the origin of the structuring element is at (0, 0).
  </p>
  <p>
   Used with grayscale images, which are always converted to byte type, the ERODE function is accomplished by taking the minimum of a set of differences. It can be used to conveniently implement the neighborhood minimum operator with the shape of the neighborhood given by the structuring element.
  </p>
  <h2 class="API">
   <a name="E_841667181_989427">
   </a>
   <a name="E_841667181_989427_PageTOC_ERODE_">
   </a>
   Syntax
  </h2>
  <p class="Syntax">
   <i>
    Result
   </i>
   = ERODE(
   <i>
    Image
   </i>
   ,
   <i>
    Structure
   </i>
   [,&#160;
   <i>
    X
   </i>
   <sub class="italic">
    0
   </sub>
   [,&#160;
   <i>
    Y
   </i>
   <sub class="italic">
    0
   </sub>
   [,&#160;
   <i>
    Z
   </i>
   <sub class="italic">
    0
   </sub>
   ]]] [,&#160;/
   <a class="MCXref_Heading_0" href="#E_841667181_989437">
    GRAY
   </a>
   [,&#160;/
   <a class="MCXref_Heading_0" href="#E_841667181_989439">
    PRESERVE_TYPE
   </a>
   | ,&#160;/
   <a class="MCXref_Heading_0" href="#E_841667181_989441">
    UINT
   </a>
   | ,&#160;/
   <a class="MCXref_Heading_0" href="#E_841667181_989443">
    ULONG
   </a>
   ]] [,&#160;
   <a class="MCXref_Heading_0" href="#E_841667181_989445">
    VALUES
   </a>
   =
   <i>
    array
   </i>
   ] )
  </p>
  <h2 class="API">
   <a name="E_841667181_996524">
   </a>
   <a name="E_841667181_59942">
   </a>
   Return Value
  </h2>
  <p>
   The ERODE function returns the erosion of
   <i>
    Image
   </i>
   by the structuring element
   <i>
    Structure
   </i>
   .
  </p>
  <h2 class="API">
   <a name="E_841667181_989429">
   </a>
   <a name="E_841667181_989429_PageTOC_ERODE_">
   </a>
   Arguments
  </h2>
  <h3 class="Argument">
   Image
  </h3>
  <p>
   A one-, two-, or three-dimensional array upon which the erosion is to be performed. If this parameter is not of byte type, a temporary byte copy is obtained. If neither of the keywords GRAY or VALUES is present, the image is treated as a binary image with all nonzero pixels considered as 1.
  </p>
  <h3 class="Argument">
   Structure
  </h3>
  <p>
   A one-, two-, or three-dimensional array to be used as the structuring element. The elements are interpreted as binary values—either zero or nonzero. The structuring element must have the same number of dimensions as
   <i>
    Image
   </i>
   .
  </p>
  <h3 class="Argument">
   X
   <sub class="italic">
    0
   </sub>
   , Y
   <sub class="italic">
    0
   </sub>
   , Z
   <sub class="italic">
    0
   </sub>
  </h3>
  <p>
   Optional parameters specifying the one-, two-, or three-dimensional coordinate of the structuring element’s origin. If omitted, the origin is set to the center, ([
   <i>
    N
   </i>
   <sub class="italic">
    x
   </sub>
   /2], [
   <i>
    N
   </i>
   <sub class="italic">
    y
   </sub>
   /2], [
   <i>
    N
   </i>
   <sub class="italic">
    z
   </sub>
   /2]), where
   <i>
    N
   </i>
   <sub class="italic">
    x
   </sub>
   ,
   <i>
    N
   </i>
   <sub class="italic">
    y
   </sub>
   , and
   <i>
    N
   </i>
   <sub class="italic">
    z
   </sub>
   are the dimensions of the structuring element array. The origin need not be within the structuring element.
  </p>
  <h2 class="API">
   <a name="E_841667181_989436">
   </a>
   <a name="E_841667181_989436_PageTOC_ERODE_">
   </a>
   Keywords
  </h2>
  <h3 class="Keyword">
   <a name="E_841667181_989437">
   </a>
   <a name="E_841667181_989437_Keywords_ERODE__">
   </a>
   GRAY
  </h3>
  <p>
   Set this keyword to perform grayscale, rather than binary, erosion. Nonzero elements of the
   <i>
    Structure
   </i>
   parameter determine the shape of the structuring element (neighborhood). If VALUES is not present, all elements of the structuring element are 0, yielding the neighborhood minimum operator.
  </p>
  <h3 class="Keyword">
   <a name="E_841667181_989439">
   </a>
   <a name="E_841667181_989439_Keywords_ERODE__">
   </a>
   PRESERVE_TYPE
  </h3>
  <p>
   Set this keyword to return the same type as the input array. This keyword only applies if the GRAY keyword is set.
  </p>
  <h3 class="Keyword">
   <a name="E_841667181_989441">
   </a>
   <a name="E_841667181_989441_Keywords_ERODE__">
   </a>
   UINT
  </h3>
  <p>
   Set this keyword to return an unsigned integer array. This keyword only applies if the GRAY keyword is set.
  </p>
  <h3 class="Keyword">
   <a name="E_841667181_989443">
   </a>
   <a name="E_841667181_989443_Keywords_ERODE__">
   </a>
   ULONG
  </h3>
  <p>
   Set this keyword to return an unsigned longword integer array. This keyword only applies if the GRAY keyword is set.
  </p>
  <h3 class="Keyword">
   <a name="E_841667181_989445">
   </a>
   <a name="E_841667181_989445_Keywords_ERODE__">
   </a>
   VALUES
  </h3>
  <p>
   An array of the same dimensions as
   <i>
    Structure
   </i>
   providing the values of the structuring element. The presence of this keyword implies grayscale erosion. Each pixel of the result is the minimum of Image less the corresponding elements of VALUE. If the resulting difference is less than zero, the return value will be zero.
  </p>
  <h2 class="API">
   <a name="E_841667181_989470">
   </a>
   <a name="E_841667181_989470_PageTOC_ERODE_">
   </a>
   Examples
  </h2>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   Also see “Eroding and Dilating Image Objects” (Chapter 9,
   <i>
    Image Processing in IDL
   </i>
   ) in the
   <code>
    help/pdf
   </code>
   directory of your IDL installation.
  </p>
  <h3>
   <a name="E_841667181_989471_Keywords_ERODE__">
   </a>
   Example 1
  </h3>
  <p>
   This example thresholds a grayscale image at the value of 100, producing a binary image. The result is then “opened” with a 3 pixel by 3 pixel square shape operator, using the ERODE and DILATE operators. The effect is to remove holes, islands, and peninsula smaller than the shape operator:
  </p>
  <p class="Code">
   ; Create a 400x400 byte array
   <br />
   A=BYTSCL(DIST(400))
   <br />
   <br />
   ; Threshold and make binary image:
   <br />
   B = A GE 100
   <br />
   <br />
   ; Create the shape operator:
   <br />
   S = REPLICATE(1, 3, 3)
   <br />
   <br />
   ; "Opening" operator:
   <br />
   C = DILATE(ERODE(B, S), S)
   <br />
   <br />
   ; Show the result:
   <br />
   TVSCL, C
   <br />
  </p>
  <h3>
   <a name="E_841667181_989484_Keywords_ERODE__">
   </a>
   Example 2
  </h3>
  <p>
   For grayscale images, ERODE takes the neighborhood minimum, where the shape of the neighborhood is given by the structuring element. Elements for which the structuring element extends off the array are indeterminate. For example, assume you have the following image and structuring element:
  </p>
  <p class="Code">
   image = BYTE([2,1,3,3,3,3,1,2])
  </p>
  <p class="Code">
   s = [1,1]
  </p>
  <p>
   If the origin of the structuring element is not specified in the call to ERODE, the origin defaults to one half the width of the structuring element, which is 1 in this case. Therefore, for the first element in the image array, the structuring element is aligned with the image as depicted below:
  </p>
  <p style="text-align: center;">
   <img src="../../images/dilate01.gif" style="margin-left: 6.30432px;margin-top: 1.59192px;margin-right: 184.1011px;margin-bottom: 0.602641px;" />
  </p>
  <p>
   This will cause an indeterminate value for the first element in the ERODE result. If edge values are important, you must pad the image with as many elements as there are elements in the structuring element that extend off the array, in all dimensions. The value of the padding elements must be the maximum value in the image, since ERODE calculates a neighborhood minimum. In this case, you would need to pad the image with a single leading 3. If the structuring element were
   <span class="Courier">
    s=[1,1,1,1]
   </span>
   , and you specified an origin of 2, the structuring element would align with the image as follows:
  </p>
  <p style="text-align: center;">
   <img src="../../images/dilate02.gif" style="margin-left: 7.52472px;margin-right: 164.8663px;margin-bottom: 0.5299199px;" />
  </p>
  <p>
   Therefore, you would need to pad the image with at least two leading 3s and at least one trailing 3. You would then perform the erosion operation on the padded image, and remove the padding from the result.
  </p>
  <p>
   The following code illustrates this method:
  </p>
  <p class="Code">
   image = BYTE([2,1,3,3,3,3,1,2])
   <br />
   s = [1,1] ; Structuring element
   <br />
   PRINT, 'Image: '
   <br />
   PRINT, image
   <br />
   <br />
   PRINT, 'Erosion using no padding: '
   <br />
   PRINT, ERODE(image, s, /GRAY)
   <br />
   <br />
   result = ERODE([MAX(image), image], s, /GRAY)
   <br />
   PRINT, 'Erosion using padding: '
   <br />
   PRINT, result[1:N_ELEMENTS(image)]
   <br />
  </p>
  <p>
   IDL prints:
  </p>
  <p class="Code">
   Image:
  </p>
  <p class="Code">
   2   1   3   3   3   3   1   2
  </p>
  <p class="Code">
   Erosion using no padding:
  </p>
  <p class="Code">
   0   1   1   3   3   3   1   1
  </p>
  <p class="Code">
   Erosion using padding:
  </p>
  <p class="Code">
   2   1   1   3   3   3   1   1
  </p>
  <h2 class="API">
   <a name="E_841667181_989516">
   </a>
   <a name="E_841667181_989516_PageTOC_ERODE_">
   </a>
   Version History
  </h2>
  <table style="width: 499px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
   <col width="91px" />
   <col width="408px" />
   <tbody>
    <tr>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
      <p>
       Pre 4.0
      </p>
     </td>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
      <p>
       Introduced
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="E_841667181_992768">
   </a>
   <a name="E_841667181_992768_PageTOC_ERODE_">
   </a>
   See Also
  </h2>
  <p>
   <a href="../D/DILATE.html#D_843829869_747869">
    DILATE
   </a>
   ,
   <a href="../M/MORPH_CLOSE.html#M_824365677_1117238">
    MORPH_CLOSE
   </a>
   ,
   <a href="../M/MORPH_DISTANCE.html#M_824365677_948885">
    MORPH_DISTANCE
   </a>
   ,
   <a href="../M/MORPH_GRADIENT.html#M_824365677_948880">
    MORPH_GRADIENT
   </a>
   ,
   <a href="../M/MORPH_HITORMISS.html#M_824365677_930030">
    MORPH_HITORMISS
   </a>
   ,
   <a href="../M/MORPH_OPEN.html#M_824365677_930051">
    MORPH_OPEN
   </a>
   ,
   <a href="../M/MORPH_THIN.html#M_824365677_930961">
    MORPH_THIN
   </a>
   ,
   <a href="../M/MORPH_TOPHAT.html#M_824365677_930077">
    MORPH_TOPHAT
   </a>
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>