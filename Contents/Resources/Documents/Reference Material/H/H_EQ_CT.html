<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Routines (alphabetical)|Routines: H" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   H_EQ_CT
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/Figure_Format.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#Reference Material/H/H_EQ_CT.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../images/ref_part1.html">
    Routines (alphabetical)
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="H_list.html">
    Routines: H
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    H_EQ_CT
   </span>
  </div>
  <h1 class="Routine">
   <a name="H_835179117_931377">
   </a>
   <a name="H_835179117_52883">
   </a>
   H_EQ_CT
  </h1>
  <p madcap:conditions="Reference Material.Online_Help_Only">
   <madcap:conditionaltext madcap:conditions="Reference Material.Online_Help_Only">
    <a class="MCXref_Heading_0" href="#H_835179117_759193">
     Syntax
    </a>
    |
    <a class="MCXref_Heading_0" href="#H_835179117_759195">
     Arguments
    </a>
    |
    <a class="MCXref_Heading_0" href="#H_835179117_883503">
     Keywords
    </a>
    |
    <a class="MCXref_Heading_0" href="#H_835179117_924455">
     Example
    </a>
    |
    <a class="MCXref_Heading_0" href="#H_835179117_759198">
     Version History
    </a>
    |
    <a class="MCXref_Heading_0" href="#H_835179117_880129">
     See Also
    </a>
   </madcap:conditionaltext>
  </p>
  <p>
   The
   <a name="kanchor1108">
   </a>
   H_EQ_CT procedure
   <a name="kanchor1109">
   </a>
   histogram-equalizes the color tables for an image or a region of the display. A pixel-distribution histogram is obtained, the cumulative integral is taken and scaled, and the result is applied to the current color table.
  </p>
  <p>
   Histogram
   <a name="kanchor1110">
   </a>
   equalization
   <a name="kanchor1111">
   </a>
   is used to change either an image or its associated color table to display minor variations within nearly uniform areas of the image. The histogram of the image is used to determine where the image or color table should be equalized to highlight these minor variations. See “Working with Histograms” (Chapter 8,
   <i>
    Image Processing in IDL
   </i>
   ) in the
   <code>
    help/pdf
   </code>
   directory of the IDL installation directory for more information on histogram equalization with Object Graphics.
  </p>
  <p>
   This routine is written in the IDL language. Its source code can be found in the file
   <span class="Courier">
    h_eq_ct.pro
   </span>
   in the
   <span class="Courier">
    lib
   </span>
   subdirectory of the IDL distribution.
  </p>
  <h2 class="API">
   <a name="H_835179117_759193">
   </a>
   <a name="H_835179117_759193_PageTOC_H_EQ_CT_">
   </a>
   Syntax
  </h2>
  <p class="Syntax">
   H_EQ_CT [,&#160;
   <i>
    Image
   </i>
   ]
  </p>
  <h2 class="API">
   <a name="H_835179117_759195">
   </a>
   <a name="H_835179117_759195_PageTOC_H_EQ_CT_">
   </a>
   Arguments
  </h2>
  <h3 class="Argument">
   Image
  </h3>
  <p>
   A two-dimensional byte array representing the image whose histogram is to be used in determining the new color tables. If this value is omitted, the user is prompted to mark the diagonal corners of a region of the display. If
   <i>
    Image
   </i>
   is specified, it is assumed that the image is loaded into the current IDL window.
   <i>
    Image
   </i>
   must be scaled the same way as the image loaded to the display.
  </p>
  <h2 class="API">
   <a name="H_835179117_883503">
   </a>
   <a name="H_835179117_40970">
   </a>
   Keywords
  </h2>
  <p>
   None.
  </p>
  <h2 class="API">
   <a name="H_835179117_924455">
   </a>
   <a name="H_835179117_91606">
   </a>
   Example
  </h2>
  <p>
   <a name="kanchor1112">
   </a>
   The following example will apply histogram equalization to a color table associated with an image of mineral deposits to reveal previously indistinguishable features. This histogram equalization example is in Direct Graphics, which uses routines that directly work with the current color table. Since the concept of a current color table does not apply to Object Graphics, you must use histogram equalization routines that directly effect the image. See “Working with Histograms” (Chapter 8,
   <i>
    Image Processing in IDL
   </i>
   ) in the
   <code>
    help/pdf
   </code>
   directory of the IDL installation directory for more information on histogram equalization with Object Graphics. Complete the following steps for a detailed description of the process.
  </p>
  <p class="ExampleCode" madcap:autonum="&lt;b&gt;Example Code: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Example Code:
     </b>
    </span>
   </span>
   See
   <span class="Courier">
    histogramequalizing_direct.
    <a name="kanchor1113">
    </a>
    pro
   </span>
   in the
   <span class="Courier">
    examples/doc/image
   </span>
   subdirectory of the IDL installation directory for code that duplicates this example. Run the example procedure by entering
   <span class="Courier">
    hailstorm
   </span>
   at the IDL command prompt or view the file in an IDL Editor window by entering
   <span class="Courier">
    .EDIT histogramequalizing_direct.pro
   </span>
   . Note that the BLOCK keyword is set when using XLOADCT to force the example routine to wait until the
   <span class="Bold">
    Done
   </span>
   button is pressed to continue. If the BLOCK keyword was not set, the example routine would produce all of the displays at once and then end.
  </p>
  <table class="AutoNumber_p_Numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
   <col style="width: 16px;" />
   <col style="width: 24px;" />
   <col style="width: auto;" />
   <tr>
    <td valign="top">
    </td>
    <td class="AutoNumber_p_Numbered1" valign="top">
     <span>
      1.
     </span>
    </td>
    <td class="AutoNumber_p_Numbered1" madcap:autonum="1. " valign="top">
     Determine the path to the
     <span class="Courier">
      mineral.png
     </span>
     file:
    </td>
   </tr>
  </table>
  <p class="Code">
   file = FILEPATH('mineral.png', $
   <br />
   &#160;&#160;&#160;SUBDIRECTORY = ['examples', 'data'])
  </p>
  <table class="AutoNumber_p_Numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
   <col style="width: 16px;" />
   <col style="width: 24px;" />
   <col style="width: auto;" />
   <tr>
    <td valign="top">
    </td>
    <td class="AutoNumber_p_Numbered1" valign="top">
     <span>
      2.
     </span>
    </td>
    <td class="AutoNumber_p_Numbered1" madcap:autonum="2. " valign="top">
     Import the image from the
     <span class="Courier">
      mineral.png
     </span>
     file into IDL:
    </td>
   </tr>
  </table>
  <p class="Code">
   image = READ_PNG(file)
  </p>
  <table class="AutoNumber_p_Numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
   <col style="width: 16px;" />
   <col style="width: 24px;" />
   <col style="width: auto;" />
   <tr>
    <td valign="top">
    </td>
    <td class="AutoNumber_p_Numbered1" valign="top">
     <span>
      3.
     </span>
    </td>
    <td class="AutoNumber_p_Numbered1" madcap:autonum="3. " valign="top">
     Determine the size of the imported image:
    </td>
   </tr>
  </table>
  <p class="Code">
   imageSize = SIZE(image, /DIMENSIONS)
  </p>
  <table class="AutoNumber_p_Numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
   <col style="width: 16px;" />
   <col style="width: 24px;" />
   <col style="width: auto;" />
   <tr>
    <td valign="top">
    </td>
    <td class="AutoNumber_p_Numbered1" valign="top">
     <span>
      4.
     </span>
    </td>
    <td class="AutoNumber_p_Numbered1" madcap:autonum="4. " valign="top">
     If you are running IDL on a TrueColor display, set the DECOMPOSED keyword to the DEVICE command to zero before your first color table related routine is used within an IDL session or program:
    </td>
   </tr>
  </table>
  <p class="Code">
   DEVICE, DECOMPOSED = 0
  </p>
  <table class="AutoNumber_p_Numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
   <col style="width: 16px;" />
   <col style="width: 24px;" />
   <col style="width: auto;" />
   <tr>
    <td valign="top">
    </td>
    <td class="AutoNumber_p_Numbered1" valign="top">
     <span>
      5.
     </span>
    </td>
    <td class="AutoNumber_p_Numbered1" madcap:autonum="5. " valign="top">
     Initialize the image display:
    </td>
   </tr>
  </table>
  <p class="Code">
   LOADCT, 0
   <br />
   WINDOW, 0, XSIZE = 2*imageSize[0], YSIZE = imageSize[1], $
   <br />
   &#160;&#160;&#160;TITLE = 'Histogram/Image'
  </p>
  <table class="AutoNumber_p_Numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
   <col style="width: 16px;" />
   <col style="width: 24px;" />
   <col style="width: auto;" />
   <tr>
    <td valign="top">
    </td>
    <td class="AutoNumber_p_Numbered1" valign="top">
     <span>
      6.
     </span>
    </td>
    <td class="AutoNumber_p_Numbered1" madcap:autonum="6. " valign="top">
     Compute and display the histogram of the image. This step is not required to perform histogram equalization on a color table within IDL. It is done here to show how the histogram equalization affects the color table:
    </td>
   </tr>
  </table>
  <p class="Code">
   brightnessHistogram = BYTSCL(HISTOGRAM(image))
   <br />
   PLOT, brightnessHistogram, XSTYLE = 9, YSTYLE = 5, $
   <br />
   POSITION = [0.05, 0.2, 0.45, 0.9], $
   <br />
   XTITLE = 'Histogram of Image'
  </p>
  <table class="AutoNumber_p_Numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
   <col style="width: 16px;" />
   <col style="width: 24px;" />
   <col style="width: auto;" />
   <tr>
    <td valign="top">
    </td>
    <td class="AutoNumber_p_Numbered1" valign="top">
     <span>
      7.
     </span>
    </td>
    <td class="AutoNumber_p_Numbered1" madcap:autonum="7. " valign="top">
     Display the image within the same window.
    </td>
   </tr>
  </table>
  <p class="Code">
   TV, image, 1
  </p>
  <p class="indent">
   The following figure shows the resulting histogram and its related image.
  </p>
  <table style="width: 517px;caption-side: bottom;mc-table-style: url('../../Resources/TableStyles/Figure_Format.css');" class="TableStyle_Figure_Format" cellspacing="0">
   <caption valign="bottom" style="padding-bottom: 12pt;">
   </caption>
   <p class="FigureTitle">
    <span class="_Override" style="font-family: Helvetica;line-height: 13pt;">
     Histogram (left) of the Mineral Image (right) in Direct Graphics
    </span>
   </p>
   <col width="517px" />
   <tbody>
    <tr>
     <td class="TableStyle_Figure_Format_Body_0_0_RowEnd_ColEnd">
      <p>
       &#160;
      </p>
      <p style="text-align: center;">
       <img src="../../images/imgcolor25.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 5.999783px;margin-bottom: 5.999752px;" />
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <table class="AutoNumber_p_Numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
   <col style="width: 16px;" />
   <col style="width: 24px;" />
   <col style="width: auto;" />
   <tr>
    <td valign="top">
    </td>
    <td class="AutoNumber_p_Numbered1" valign="top">
     <span>
      8.
     </span>
    </td>
    <td class="AutoNumber_p_Numbered1" madcap:autonum="8. " valign="top">
     Use the H_EQ_CT procedure to perform histogram equalization on the current color table:
    </td>
   </tr>
  </table>
  <p class="Code">
   H_EQ_CT, image
  </p>
  <table class="AutoNumber_p_Numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
   <col style="width: 16px;" />
   <col style="width: 24px;" />
   <col style="width: auto;" />
   <tr>
    <td valign="top">
    </td>
    <td class="AutoNumber_p_Numbered1" valign="top">
     <span>
      9.
     </span>
    </td>
    <td class="AutoNumber_p_Numbered1" madcap:autonum="9. " valign="top">
     Display the original image in another window with the updated color table:
    </td>
   </tr>
  </table>
  <p class="Code">
   WINDOW, 1, XSIZE = imageSize[0], YSIZE = imageSize[1], $
   <br />
   TITLE = 'Histogram Equalized Color Table'
   <br />
   TV, image
  </p>
  <p class="indent">
   Display the updated color table with the XLOADCT utility:
  </p>
  <p class="Code">
   XLOADCT
  </p>
  <p class="indent">
   Click on the
   <span class="Bold">
    Done
   </span>
   button close the XLOADCT utility.
  </p>
  <p class="indent">
   The following figure contains the results of the equalization on the image and its color table. After introducing intensity gradients within previously uniform regions of the image, the cracks are now more visible. However, some of the original features are not as clear. These regions can be clarified by interactively applying the amount of equalization to the color table.
  </p>
  <p class="indent">
   &#160;
  </p>
  <table style="width: 517px;caption-side: bottom;mc-table-style: url('../../Resources/TableStyles/Figure_Format.css');" class="TableStyle_Figure_Format" cellspacing="0">
   <caption valign="bottom" style="padding-bottom: 12pt;">
   </caption>
   <p class="FigureTitle">
    Resulting Image (left) and Color Table (right) of the Histogram Equalization in Direct Graphics
   </p>
   <col width="517px" />
   <tbody>
    <tr>
     <td class="TableStyle_Figure_Format_Body_0_0_RowEnd_ColEnd">
      <p>
       &#160;
      </p>
      <p style="text-align: center;">
       <img src="../../images/imgcolor26.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 5.700954px;" />
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <p class="indent">
   The histogram equalizing process can also be interactively applied to a color table with the H_EQ_INT procedure. The H_EQ_INT procedure provides an interactive display, allowing you to use the cursor to control the amount of equalization. The equalization applied to the color table is scaled by a fraction, which is controlled by the movement of the cursor in the x-direction. If the cursor is all the way to the left side of the interactive display, the fraction equalized is close to zero, and the equalization has little effect on the color table. If the cursor is all the way to the right side of the interactive display, the fraction equalized is close to one, and the equalization is fully applied to the color table (which is similar to the results from the H_EQ_CT procedure). You can click on the right mouse button to set the amount of equalization and exit out of the interactive display.
  </p>
  <table class="AutoNumber_p_Numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
   <col style="width: 16px;" />
   <col style="width: 24px;" />
   <col style="width: auto;" />
   <tr>
    <td valign="top">
    </td>
    <td class="AutoNumber_p_Numbered1" valign="top">
     <span>
      10.
     </span>
    </td>
    <td class="AutoNumber_p_Numbered1" madcap:autonum="10. " valign="top">
     Use the H_EQ_INT procedure to interactively perform histogram equalization on the current color table:
    </td>
   </tr>
  </table>
  <p class="Code">
   H_EQ_INT, image
  </p>
  <p class="indent">
   Place the cursor at about 130 in the x-direction, which is about 0.5 equalized (about 50% of the equalization applied by the H_EQ_CT procedure). You do not have to be exact for this example. The y-direction location is arbitrary.
  </p>
  <p class="indent">
   Click on the right mouse button.
  </p>
  <p class="indent">
   The interactive display is similar to the following figure.
  </p>
  <table style="width: 517px;caption-side: bottom;mc-table-style: url('../../Resources/TableStyles/Figure_Format.css');" class="TableStyle_Figure_Format" cellspacing="0">
   <caption valign="bottom" style="padding-bottom: 12pt;">
   </caption>
   <p class="FigureTitle">
    Interactive Display for Histogram Equalization
   </p>
   <col width="517px" />
   <tbody>
    <tr>
     <td class="TableStyle_Figure_Format_Body_0_0_RowEnd_ColEnd">
      <p>
       &#160;
      </p>
      <p style="text-align: center;">
       <img src="../../images/imgcolor27.gif" style="margin-right: 2.640238px;" />
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <table class="AutoNumber_p_Numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
   <col style="width: 16px;" />
   <col style="width: 24px;" />
   <col style="width: auto;" />
   <tr>
    <td valign="top">
    </td>
    <td class="AutoNumber_p_Numbered1" valign="top">
     <span>
      11.
     </span>
    </td>
    <td class="AutoNumber_p_Numbered1" madcap:autonum="11. " valign="top">
     Display the image using the updated color table in another window:
    </td>
   </tr>
  </table>
  <p class="Code">
   WINDOW, 2, XSIZE = imageSize[0], YSIZE = imageSize[1], $
   <br />
   TITLE = 'Interactively Equalized Color Table'
   <br />
   TV, image
  </p>
  <p class="indent">
   Display the updated color table with the XLOADCT utility:
  </p>
  <p class="Code">
   XLOADCT
  </p>
  <p class="indent">
   Click on the
   <span class="Bold">
    Done
   </span>
   button close the XLOADCT utility.
  </p>
  <p class="indent">
   The following figure contains the results of the equalization on the image and its color table. The original details have returned and the cracks are still visible.
  </p>
  <table style="width: 517px;caption-side: bottom;mc-table-style: url('../../Resources/TableStyles/Figure_Format.css');" class="TableStyle_Figure_Format" cellspacing="0">
   <caption valign="bottom" style="padding-bottom: 12pt;">
   </caption>
   <p class="FigureTitle">
    Resulting Image (left) and Color Table (right) of the Interactive Histogram Equalization in Direct Graphics
   </p>
   <col width="517px" />
   <tbody>
    <tr>
     <td class="TableStyle_Figure_Format_Body_0_0_RowEnd_ColEnd">
      <p>
       &#160;
      </p>
      <p style="text-align: center;">
       <img src="../../images/imgcolor28.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 6.000484px;margin-bottom: 5.999767px;" />
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="H_835179117_759198">
   </a>
   <a name="H_835179117_759198_PageTOC_H_EQ_CT_">
   </a>
   Version History
  </h2>
  <table style="width: 499px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
   <col width="91px" />
   <col width="408px" />
   <tbody>
    <tr>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
      <p>
       Pre 4.0
      </p>
     </td>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
      <p>
       Introduced
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="H_835179117_880129">
   </a>
   <a name="H_835179117_880129_PageTOC_H_EQ_CT_">
   </a>
   See Also
  </h2>
  <p>
   <a class="MCXref_Heading_0" href="H_EQ_INT.html#H_835179117_759200">
    H_EQ_INT
   </a>
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>