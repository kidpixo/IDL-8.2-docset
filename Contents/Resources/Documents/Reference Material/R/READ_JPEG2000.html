<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Routines (alphabetical)|Routines: R" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   READ_JPEG2000
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/Figure_Format.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#Reference Material/R/READ_JPEG2000.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../images/ref_part1.html">
    Routines (alphabetical)
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="R_list.html">
    Routines: R
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    READ_JPEG2000
   </span>
  </div>
  <h1 class="Routine">
   <a name="R_822202989_1168172">
   </a>
   <a name="R_822202989_61473">
   </a>
   READ_JPEG2000
  </h1>
  <p madcap:conditions="Reference Material.Online_Help_Only">
   <madcap:conditionaltext madcap:conditions="Reference Material.Online_Help_Only">
    <a class="MCXref_Heading_0" href="#R_822202989_1171461">
     Syntax
    </a>
    |
    <a class="MCXref_Heading_0" href="#R_822202989_1171481">
     Return Value
    </a>
    |
    <a class="MCXref_Heading_0" href="#R_822202989_1171485">
     Arguments
    </a>
    |
    <a class="MCXref_Heading_0" href="#R_822202989_1171492">
     Keywords
    </a>
    |
    <a class="MCXref_Heading_0" href="#R_822202989_1171509">
     Example
    </a>
    |
    <a class="MCXref_Heading_0" href="#R_822202989_1171545">
     Version History
    </a>
    |
    <a class="MCXref_Heading_0" href="#R_822202989_1171547">
     See Also
    </a>
   </madcap:conditionaltext>
  </p>
  <p>
   The
   <a name="kanchor2233">
   </a>
   READ_JPEG2000 function extracts and returns image data from a JPEG2000 file. This function is a wrapper around the IDLffJPEG2000 object interface that presents JPEG2000 image loading in a familiar way to users of the READ_* image routines. However this function is not as efficient as the object interface and the object interface should be used whenever possible. See
   <a class="MCXref_Heading_0" href="../../Object Classes/File Format/IDLffJPEG2000.html#objects_ff_3755668711_1371624" target="" title="" alt="">
    IDLffJPEG2000
   </a>
   for information about the object interface.
  </p>
  <h2 class="API">
   <a name="R_822202989_1171461">
   </a>
   <a name="R_822202989_1171461_PageTOC_READ_JPEG2000_">
   </a>
   Syntax
  </h2>
  <p class="Syntax">
   <i>
    Result
   </i>
   = READ_JPEG2000(
   <i>
    Filename
   </i>
   [,&#160;
   <i>
    Red
   </i>
   ,&#160;
   <i>
    Green
   </i>
   ,&#160;
   <i>
    Blue
   </i>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#R_822202989_1171494">
    DISCARD_LEVELS
   </a>
   =
   <i>
    value
   </i>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#R_822202989_1171497">
    MAX_LAYERS
   </a>
   =
   <i>
    value
   </i>
   ] [,&#160;/
   <a class="MCXref_Heading_0" href="#R_822202989_1171500">
    ORDER
   </a>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#R_822202989_1171503">
    REGION
   </a>
   =[
   <i>
    StartX
   </i>
   ,
   <i>
    StartY
   </i>
   ,
   <i>
    Width
   </i>
   ,
   <i>
    Height
   </i>
   ] ] )
  </p>
  <h2 class="API">
   <a name="R_822202989_1171481">
   </a>
   <a name="R_822202989_1171481_PageTOC_READ_JPEG2000_">
   </a>
   Return Value
  </h2>
  <p>
   The
   <i>
    Result
   </i>
   is a two or three-dimensional array containing the image data. The dimensions of the result are [
   <i>
    nComponents
   </i>
   ,
   <i>
    Width
   </i>
   ,
   <i>
    Height
   </i>
   ], where
   <i>
    nComponents
   </i>
   is the number of components present in the file. Images with only one component will be returned as a two dimensional array [
   <i>
    Width
   </i>
   ,
   <i>
    Height
   </i>
   ].
  </p>
  <p>
   The data type of the result is automatically determined using the bit-depth and signed properties of the returned components. For bit-depth = 8 the result will be of type byte. For bit-depths ≥ 9 and ≤ 16 the result will be of type integer or uint. For bit-depths &gt; 16 the result will be long or ulong. Components with differing bit-depths will be returned using the largest bit-depth. Components which are a mix of signed and unsigned will be returned as signed.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   The returned image is automatically ordered from bottom-to-top, where the first pixel returned is located at the bottom-left corner of the image. The ORDER keyword may be used to override this behavior.
  </p>
  <h2 class="API">
   <a name="R_822202989_1171485">
   </a>
   <a name="R_822202989_1171485_PageTOC_READ_JPEG2000_">
   </a>
   Arguments
  </h2>
  <h3 class="Argument">
   <a name="R_822202989_30986">
   </a>
   Filename
  </h3>
  <p>
   A scalar string containing the full path and filename of the JPEG2000 file to read.
  </p>
  <h3 class="Argument">
   <a name="R_822202989_59748">
   </a>
   Red, Green, Blue
  </h3>
  <p>
   Set these arguments to named variables that will contain the Red, Green, and Blue color vectors of the color palette from the file.
  </p>
  <h2 class="API">
   <a name="R_822202989_1171492">
   </a>
   <a name="R_822202989_1171492_PageTOC_READ_JPEG2000_">
   </a>
   Keywords
  </h2>
  <h3 class="Keyword">
   <a name="R_822202989_1171494">
   </a>
   <a name="R_822202989_58159">
   </a>
   DISCARD_LEVELS
  </h3>
  <p>
   Set this keyword to an integer giving the number of highest resolution levels which will not appear in the result.
  </p>
  <p>
   The resulting image dimensions are given by:
  </p>
  <p class="Code">
   CEIL((Dimensions + Offset)/(2^DL)) - CEIL(Offset/(2^DL))
  </p>
  <p>
   where
   <i>
    Dimensions
   </i>
   and
   <i>
    Offset
   </i>
   are the image dimensions and offset, and
   <i>
    DL
   </i>
   is the value of DISCARD_LEVELS.
  </p>
  <p>
   For example, if the image in the file has dimensions of 1024 x 1026, and DISCARD_LEVELS is set to 3, the resulting image will have dimensions of 128 x 129, which is the ceiling of [1024, 1026] divided by 2
   <sup>
    3
   </sup>
   . The number of resolution levels in a file may be determined by checking the value of the N_LEVELS field within the QUERY_JPEG2000 structure.
  </p>
  <h3 class="Keyword">
   <a name="R_822202989_1171497">
   </a>
   <a name="R_822202989_47268">
   </a>
   MAX_LAYERS
  </h3>
  <p>
   Set this keyword to an integer giving the maximum number of quality layers which will be returned in the result. Each layer contains the information required to represent the image at a higher quality, given the information from all the previous layers. A value of 0, the default, implies that all layers should be returned. For example, specifying MAX_LAYERS=4 processes only the first four quality layers. The number of quality layers in a file may be determined by checking the value of the N_LAYERS field within the QUERY_JPEG2000 structure.
  </p>
  <h3 class="Keyword">
   <a name="R_822202989_1171500">
   </a>
   <a name="R_822202989_47513">
   </a>
   ORDER
  </h3>
  <p>
   JPEG2000 images are assumed to be stored in top-to-bottom order, while IDL usually assumes images are in bottom-to-top order. By default (ORDER = 0), READ_JPEG2000 will automatically flip the result to match IDL's bottom-to-top order. Setting ORDER to a nonzero value will return the JPEG2000 image without doing the vertical flip.
  </p>
  <h3 class="Keyword">
   <a name="R_822202989_1171503">
   </a>
   <a name="R_822202989_37623">
   </a>
   REGION
  </h3>
  <p>
   Set this keyword to a four-element vector containing the rectangular region of the image to read, in the canvas coordinate system. The region is specified as [
   <i>
    StartX
   </i>
   ,
   <i>
    StartY
   </i>
   ,
   <i>
    Width
   </i>
   ,
   <i>
    Height
   </i>
   ], where
   <i>
    StartX
   </i>
   and
   <i>
    StartY
   </i>
   must be in the range 0...2
   <sup>
    32
   </sup>
   -2, and
   <i>
    Width
   </i>
   and
   <i>
    Height
   </i>
   must be in the range 1 ... 2
   <sup>
    32
   </sup>
   -1. The region must contain at least some portion of the image, or an error will occur. If the region is larger than the image, or extends outside of the image, then only that portion that lies within the image will be returned.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   The region parameters should be specified in the canvas coordinate system, taking into account the canvas offset and canvas dimensions. The dimensions and offset may be determined from the QUERY_JPEG2000 structure. See
   <a class="MCXref_Heading_0" href="../../Object Classes/File Format/IDLffJPEG2000.html#objects_ff_3755668711_1140447" target="" title="" alt="">
    The JPEG2000 Canvas Coordinate System
   </a>
   for more information.
  </p>
  <h2 class="API">
   <a name="R_822202989_1171509">
   </a>
   <a name="R_822202989_1171509_PageTOC_READ_JPEG2000_">
   </a>
   Example
  </h2>
  <p class="Code">
   ; Read in a 24-bit JPEG image.
   <br />
   input = FILEPATH('marsglobe.jpg', SUBDIR=['examples','data'])
   <br />
   READ_JPEG, input, image
   <br />
   <br />
   ; Create a JPEG2000 with 6 quality layers.
   <br />
   WRITE_JPEG2000, 'marsglobe.jp2', image, N_LAYERS=6
   <br />
   <br />
   ; Verify the file information.
   <br />
   success = QUERY_JPEG2000('marsglobe.jp2', info)
   <br />
   help, info, /STRUCT
   <br />
   <br />
   WINDOW, 0, XSIZE=2*info.dimensions[0], YSIZE=info.dimensions[1]
   <br />
   <br />
   ; Use the DISCARD_LEVELS keyword.
   <br />
   for discard=0,5 do TV, /TRUE, $
   <br />
   READ_JPEG2000('marsglobe.jp2', DISCARD_LEVELS=discard)
   <br />
   <br />
   ; Extract a region.
   <br />
   image = READ_JPEG2000('marsglobe.jp2', $
   <br />
   REGION=[0,0,200,100])
   <br />
   TV, REBIN(image, 3, 400, 200), 400, 0, /TRUE
   <br />
   <br />
   ; Use the MAX_LAYERS keyword.
   <br />
   image = READ_JPEG2000('marsglobe.jp2', MAX_LAYERS=1, $
   <br />
   REGION=[0,0,200,100])
   <br />
   TV, REBIN(image, 3, 400, 200), 400, 200, /TRUE
  </p>
  <table style="width: 517px;caption-side: bottom;mc-table-style: url('../../Resources/TableStyles/Figure_Format.css');" class="TableStyle_Figure_Format" cellspacing="0">
   <caption valign="bottom" style="padding-bottom: 12pt;">
   </caption>
   <p class="FigureTitle">
    Varying Quality Images
   </p>
   <col width="517px" />
   <tbody>
    <tr>
     <td class="TableStyle_Figure_Format_Body_0_0_RowEnd_ColEnd">
      <p>
       &#160;
      </p>
      <p style="text-align: center;">
       <img src="../../images/readjpeg1.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 6.000484px;margin-bottom: 6.000484px;" />
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   In the previous figure, the left-hand side shows the full resolution image, plus the 5 lower resolution versions (DISCARD_LEVELS=1,2,3,4,5). The right-hand side shows a magnified portion of the full quality image (bottom), and a lower quality version (top, MAX_LAYERS=1).
  </p>
  <h2 class="API">
   <a name="R_822202989_1171545">
   </a>
   <a name="R_822202989_1171545_PageTOC_READ_JPEG2000_">
   </a>
   Version History
  </h2>
  <table style="width: 499px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
   <col width="91px" />
   <col width="408px" />
   <tbody>
    <tr>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
      <p>
       6.1
      </p>
     </td>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
      <p>
       Introduced
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="R_822202989_1171547">
   </a>
   <a name="R_822202989_1171547_PageTOC_READ_JPEG2000_">
   </a>
   See Also
  </h2>
  <p>
   <a class="MCXref_Heading_0" href="../I/IOPEN.html">
    IOPEN
   </a>
   ,
   <a class="MCXref_Heading_0" href="../Q/QUERY_JPEG2000.html#Q_815714925_1095115">
    QUERY_JPEG2000
   </a>
   ,
   <a class="MCXref_Heading_0" href="../W/WRITE_JPEG2000.html#W_811389549_1077187">
    WRITE_JPEG2000
   </a>
  </p>
  <p>
   &#160;
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>