<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="IDL Programming|Objects|File Format Object Classes|IDLffMJPEG2000" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   IDLffMJPEG2000::SetData
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/Description.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#Object Classes/File Format/IDLffMJPEG2000__SetData.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../IDL Programming.html">
    IDL Programming
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="../ref_part2.html">
    Objects
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="objects_ff.html">
    File Format Object Classes
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    IDLffMJPEG2000::SetData
   </span>
  </div>
  <h1 class="ObjMethod">
   <a name="objects_ff_3755668711_1325269">
   </a>
   <a name="objects_ff_3755668711_45427">
   </a>
   IDLffMJPEG2000::SetData
  </h1>
  <p madcap:conditions="Reference Material.Online_Help_Only">
   <madcap:conditionaltext madcap:conditions="Reference Material.Online_Help_Only">
    <a class="MCXref_Heading_0" href="#objects_ff_3755668711_1326276">
     Syntax
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_ff_3755668711_1346701">
     Arguments
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_ff_3755668711_1325642">
     Keywords
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_ff_3755668711_1325644">
     Version History
    </a>
   </madcap:conditionaltext>
  </p>
  <p>
   The IDLffMJPEG::
   <a name="kanchor3874">
   </a>
   SetData function method starts a background processing thread and adds frame data to an MJ2 file that is being created. Each call to SetData call adds a frame to the frame buffer, which will be compressed by the processing thread. The length of the frame buffer is determined by the
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324795">
    FRAME_BUFFER_LENGTH
   </a>
   property.
  </p>
  <p>
   If SetData is called faster than the background processing thread can compress the frame data, SetData will wait for an available frame buffer slot before returning.
  </p>
  <p>
   The SetData and
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000__Commit.html#objects_ff_3755668711_1325263">
    IDLffMJPEG2000::Commit
   </a>
   methods are used together to create a new file. After adding all of the data to the MJ2 file using SetData, call Commit to close the file and shut down the processing thread.  You can playback the new MJ2 file by creating a new Motion JPEG2000 object that opens the file for reading.
  </p>
  <p>
   This method will throw an error if the compression fails. A CATCH statement can be used to trap these errors.
  </p>
  <h2 class="API">
   <a name="objects_ff_3755668711_1326276">
   </a>
   <a name="objects_ff_3755668711_56679">
   </a>
   Syntax
  </h2>
  <p class="Syntax">
   <i>
    Result
   </i>
   =
   <i>
    Obj
   </i>
   -&gt;[
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000.html#objects_ff_3755668711_1324160">
    IDLffMJPEG2000
   </a>
   ::]SetData (
   <i>
    A
   </i>
   <i style="font-size: 80%;vertical-align: sub;">
    1
   </i>
   <i>
    ...A
   </i>
   <i style="font-size: 80%;vertical-align: sub;">
    n
   </i>
   [,&#160;
   <a class="MCXref_Heading_0" href="#objects_ff_3755668711_1325643">
    COMPONENT
   </a>
   =
   <i>
    value
   </i>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#objects_ff_3755668711_1334910">
    FRAME_PERIOD
   </a>
   =
   <i>
    value
   </i>
   ] [,&#160;/
   <a class="MCXref_Heading_0" href="#objects_ff_3755668711_1326315">
    ORDER
   </a>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#objects_ff_3755668711_1326316">
    TILE_INDEX
   </a>
   =
   <i>
    value
   </i>
   ])
  </p>
  <h2 class="API">
   Return Value
  </h2>
  <p>
   Returns a byte value indicating success (1) or failure (0).
  </p>
  <h2 class="API">
   <a name="objects_ff_3755668711_1346701">
   </a>
   <a name="objects_ff_3755668711_45820">
   </a>
   Arguments
  </h2>
  <h3 class="Argument">
   <i>
    A
   </i>
   <i style="font-size: 80%;vertical-align: sub;">
    1
   </i>
   <i>
    ...A
   </i>
   <i style="font-size: 80%;vertical-align: sub;">
    n
   </i>
  </h3>
  <p>
   One or more arrays of data representing the component(s) or tile(s) of data associated with the single frame being written (see
   <a class="MCXref_Heading_0" href="#objects_ff_3755668711_1335715" target="" title="" alt="">
    Writing Frames, Components and Tiles
   </a>
   ). The arrays may be 2- or 3-dimensional. A 2&#8209;dimensional array contains one frame component or tile component, and has the dimensions [
   <i>
    width
   </i>
   ,
   <i>
    height
   </i>
   ]. A 3-dimensional array has the dimensions [
   <i>
    nComponents
   </i>
   ,
   <i>
    width
   </i>
   ,
   <i>
    height
   </i>
   ]. All arrays must have the same
   <i>
    width
   </i>
   ,
   <i>
    height
   </i>
   dimensions.
  </p>
  <p>
   The data type of the array arguments are converted based the
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324787">
    BIT_DEPTH
   </a>
   and
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324808">
    SIGNED
   </a>
   property values as follows:
  </p>
  <table style="width: 436px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/Description.css');" class="TableStyle_Description" cellspacing="0">
   <col width="98px" />
   <col width="338px" />
   <thead>
    <tr>
     <td class="TableStyle_Description_Head_0_0_RowSep_ColSep">
      <p>
       BIT_DEPTH
      </p>
     </td>
     <td class="TableStyle_Description_Head_0_0_RowSep_ColEnd">
      <p>
       Converted to Data Type
      </p>
     </td>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
      <p>
       ≤8
      </p>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
      <p>
       Byte
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
      <p>
       ≥9 or ≤16
      </p>
     </td>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
      <p>
       Integer, signed or unsigned based on SIGNED property
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowEnd_ColSep">
      <p>
       &gt;16
      </p>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowEnd_ColEnd">
      <p>
       Long, signed or unsigned based on SIGNED property
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   The data type of the input array has no effect on how the data is converted. If BIT_DEPTH and SIGNED are not set before the first call to SetData, data will be written as unsigned byte data. To write short or long integer data, or signed data, you must set the
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324787">
    BIT_DEPTH
   </a>
   and
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324808">
    SIGNED
   </a>
   properties before calling SetData.
  </p>
  <h4>
   <a name="objects_ff_3755668711_1335715">
   </a>
   <a name="objects_ff_3755668711_52668">
   </a>
   Writing Frames, Components and Tiles
  </h4>
  <p>
   Frames may be written using multiple calls to SetData with each call transferring one or more components (channels or bands of data) or tile components. A tile component contains one frame component for a given tile and is the smallest unit of data that can be supplied to SetData.
  </p>
  <p>
   The frame dimensions, tile dimensions and the number of components per frame are typically set prior to the first call to SetData. If they are not explicitly specified, they are inferred from the array parameters supplied in the first call to SetData. Once these properties (
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1327380">
    DIMENSIONS
   </a>
   ,
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324810">
    TILE_DIMENSIONS
   </a>
   , and
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324798">
    N_COMPONENTS
   </a>
   ) are either explicitly set through Init or SetProperty, or set though the default action of SetData, they may not be changed. For example, if you pass in data arrays
   <i>
    A
   </i>
   <sub class="italic">
    1
   </sub>
   ,
   <i>
    A
   </i>
   <sub class="italic">
    2
   </sub>
   ,
   <i>
    A
   </i>
   <sub class="italic">
    3
   </sub>
   ,
   <i>
    A
   </i>
   <sub class="italic">
    4
   </sub>
   and
   <i>
    A
   </i>
   <sub class="italic">
    5
   </sub>
   in a single call to SetData, this will be interpreted as a single frame with 5 components. All subsequent frames will be expected to have the same number of components.
  </p>
  <p>
   The frame will advance when all data for the current frame has been passed in. For example, if you pass in one frame of data at a time, each SetData call advances the frame (the
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324799">
    N_FRAMES
   </a>
   property value increases by 1). If you pass in individual components or tiles, multiple SetData calls may be needed to advance the frame. Suppose your frame consists of 4 components, which you are passing in one at a time. You will need to call SetData four times before the frame will advance. If you have a frame that consists of 2 components and 4 tiles, and you are passing in a single tile component in each SetData call, the frame will only advance after 8 calls.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   If you are writing individual components, you must set the
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324798">
    N_COMPONENTS
   </a>
   property for the MJ2 file before the first call to SetData. If you are writing tiled data, you must set the
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324810">
    TILE_DIMENSIONS
   </a>
   and
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1327380">
    DIMENSIONS
   </a>
   properties for the file before the first call to SetData.
  </p>
  <p>
   If a file does not contain the expected number of tiles or components, an error will be generated when you call
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000__Commit.html#objects_ff_3755668711_1325263">
    IDLffMJPEG2000::Commit
   </a>
   to store the data and close the file. If you do not complete writing all of the tiles or components, or if your array dimensions are not the same as the overall frame dimensions, the file storage process will not be completed. In such a case, reading the data back may result in unexpected or incorrect values.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   If transferring a frame with multiple calls to SetData, try to supply the data to SetData in a manner consistent with the progression setting of
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324805">
    PROGRESSION
   </a>
   property to ensure optimum performance and minimize memory requirements.
  </p>
  <h4>
   Color Space and Components
  </h4>
  <p>
   If not set prior to the first call to SetData, the
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324790">
    COLOR_SPACE
   </a>
   property will be automatically set based on the number of components passed in during the first call to SetData as follows:
  </p>
  <table style="width: 456px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/Description.css');" class="TableStyle_Description" cellspacing="0">
   <col width="217px" />
   <col width="239px" />
   <thead>
    <tr>
     <td class="TableStyle_Description_Head_0_0_RowSep_ColSep">
      <p>
       Number of Components
      </p>
     </td>
     <td class="TableStyle_Description_Head_0_0_RowSep_ColEnd">
      <p>
       Color Space
      </p>
     </td>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
      <p>
       3
      </p>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
      <p>
       RGB
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_1_0_RowEnd_ColSep">
      <p>
       &gt; 3 &lt;
      </p>
     </td>
     <td class="TableStyle_Description_Body_1_0_RowEnd_ColEnd">
      <p>
       LUM
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   If the
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324813">
    YCC
   </a>
   property is set (indicating that you want the library to convert from RGB to YCC before compressing the data), then you must supply all three frame components in the same call to SetData (either the entire frame or one tile at a time). If the components are provided in separate calls to SetData, the YCC conversion is not performed.
  </p>
  <h2 class="API">
   <a name="objects_ff_3755668711_1325642">
   </a>
   <a name="objects_ff_3755668711_34659">
   </a>
   Keywords
  </h2>
  <h3 class="Keyword">
   <a name="objects_ff_3755668711_1325643">
   </a>
   <a name="objects_ff_3755668711_62241">
   </a>
   COMPONENT
  </h3>
  <p>
   An integer value specifying the index of the component to be written in the current call to SetData. The default is 0. For example, suppose a frame consists of 4 components (N_COMPONENTS equals 4). If you pass in the first three components in one SetData call, you can pass in the fourth component in the next SetData call by setting COMPONENT equal to 3 (the zero-based index value of the fourth component). COMPONENT can only be used to write components sequentially.
  </p>
  <p>
   You must set the
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324798">
    N_COMPONENTS
   </a>
   property before the first call to SetData if you are setting this keyword.
  </p>
  <h3 class="Keyword">
   <a name="objects_ff_3755668711_1334910">
   </a>
   <a name="objects_ff_3755668711_79585">
   </a>
   FRAME_PERIOD
  </h3>
  <p>
   A long value that indicates the duration of a frame in ticks. Each frame in an MJ2 file can be displayed a different period of time as defined by the FRAME_PERIOD. This value, in conjunction with the
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324811">
    TIMESCALE
   </a>
   property, determines the playback rate. See
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1327908" target="" title="" alt="">
    Computing Playback Rate
   </a>
   for details.
  </p>
  <p>
   The frame period of this frame and all subsequent frames will reflect the value set using the
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324797">
    FRAME_PERIOD
   </a>
   property, or set using this FRAME_PERIOD keyword.
  </p>
  <h3 class="Keyword">
   <a name="objects_ff_3755668711_1326315">
   </a>
   <a name="objects_ff_3755668711_74931">
   </a>
   ORDER
  </h3>
  <p>
   An integer value specifying the order in which to store data. Motion JPEG2000 frames are assumed to be stored in top-to-bottom order, while IDL usually assumes frames are in bottom-to-top order. By default (ORDER= 0), this method will automatically flip the result to match Motion JPEG2000’s top-to-bottom order. Setting ORDER to a nonzero value will save the frame directly to the file without doing the vertical flip.
  </p>
  <h3 class="Keyword">
   <a name="objects_ff_3755668711_1326316">
   </a>
   <a name="objects_ff_3755668711_51892">
   </a>
   TILE_INDEX
  </h3>
  <p>
   An integer value that specifies the index of the tile to be written in the current SetData call. Frame tiles are numbered in raster scan fashion (from left to right starting at the upper left corner) beginning with an index value of 0. The default value for this keyword is 0. This keyword, like the
   <a class="MCXref_Heading_0" href="#objects_ff_3755668711_1325643">
    COMPONENT
   </a>
   keyword, lets you add data sequentially in separate SetData calls.
  </p>
  <p>
   The tile indices must range from 0 to one less than the number of tiles in the frame, which is determined by the tile dimensions (
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1324810">
    TILE_DIMENSIONS
   </a>
   property) and frame dimensions (
   <a class="MCXref_Heading_0" href="IDLffMJPEG2000_Propertie.html#objects_ff_3755668711_1327380">
    DIMENSIONS
   </a>
   property). These properties must be set prior to the first call to SetData if you are setting this keyword.
  </p>
  <h2 class="API">
   Examples
  </h2>
  <p>
   Write frame components in separate SetData calls using the COMPONENT keyword. For a frame with 12 components, write the first five components in the first SetData call. Set COMPONENT to 5 (the zero-based index value of the sixth component) to add the remaining components in the next SetData call.
  </p>
  <p class="Code">
   oMJ2write-&gt;SetProperty, N_COMPONENTS=12
  </p>
  <p class="Code">
   result = oMJ2write-&gt;SetData(data0, data1, data2, data3, data4, $
  </p>
  <p class="Code">
   &#160;&#160;&#160;COMPONENT=0)
  </p>
  <p class="Code">
   result = oMJ2write-&gt;SetData(data5, data6, data7, data8, data9, $
  </p>
  <p class="Code">
   &#160;&#160;&#160;data10, data11,COMPONENT=5)
  </p>
  <h2 class="API">
   <a name="objects_ff_3755668711_1325644">
   </a>
   <a name="objects_ff_3755668711_32095">
   </a>
   Version History
  </h2>
  <table style="width: 499px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
   <col width="91px" />
   <col width="408px" />
   <tbody>
    <tr>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
      <p>
       6.3
      </p>
     </td>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
      <p>
       Introduced
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   &#160;
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>