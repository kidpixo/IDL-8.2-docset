<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="IDL Programming|Objects|Network Object Classes|IDLnetURL" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   IDLnetURL::GetFtpDirList
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#Object Classes/Network/IDLnetURL__GetFtpDirList.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../IDL Programming.html">
    IDL Programming
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="../ref_part2.html">
    Objects
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="objects_network.html">
    Network Object Classes
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    IDLnetURL::GetFtpDirList
   </span>
  </div>
  <h1 class="ObjMethod">
   <a name="objects_network_1009015_1406752">
   </a>
   <a name="objects_network_1009015_99974">
   </a>
   I
   <a name="kanchor4801">
   </a>
   DLnetURL::GetFtpDirList
  </h1>
  <p madcap:conditions="Reference Material.Online_Help_Only">
   <madcap:conditionaltext madcap:conditions="Reference Material.Online_Help_Only">
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1407881">
     Syntax
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1406758">
     Return Value
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1406760">
     Arguments
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1406762">
     Keywords
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1406770">
     Examples
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1406772">
     Version History
    </a>
   </madcap:conditionaltext>
  </p>
  <p>
   The IDLnetURL::GetFtpDirList function method retrieves a list of files (returned as an array of strings) available from a remote FTP server on a particular path. The path must resolve to a directory and end with a slash. If the directory is empty, a single empty string is returned. When the
   <a class="MCXref_Heading_0" href="#objects_network_1009015_1406768">
    SHORT
   </a>
   keyword is set, the FTP server may or may not include directories and file statistics in the returned listing.
  </p>
  <p>
   This method sets the
   <a class="MCXref_Heading_0" href="IDLnetURL_Properties.html#objects_network_1009015_1405560">
    RESPONSE_CODE
   </a>
   and
   <a class="MCXref_Heading_0" href="IDLnetURL_Properties.html#objects_network_1009015_1405811">
    RESPONSE_HEADER
   </a>
   properties, which contain response information sent by the remote server. The information stored in these properties can be useful when troubleshooting transmission problems. Receiving callbacks and printing the status strings with the
   <a class="MCXref_Heading_0" href="IDLnetURL_Properties.html#objects_network_1009015_1406257">
    VERBOSE
   </a>
   and
   <a class="MCXref_Heading_0" href="IDLnetURL_Properties.html#objects_network_1009015_1408065">
    CALLBACK_FUNCTION
   </a>
   properties set is another valuable troubleshooting technique.
  </p>
  <p>
   This method generates an error if the transmission fails. Use a CATCH statement to trap errors and print the error messages and response codes.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   If the FTP server generates response code 530 or 67, a login is required or the current username and password are incorrect. A catch statement can be used to trap errors and print the error messages and response codes.
  </p>
  <p>
   If a FTP connection fails, try switching the connection mode from Active to Passive using the FTP_CONNECTION_MODE property.
  </p>
  <h2 class="API">
   <a name="objects_network_1009015_1407881">
   </a>
   <a name="objects_network_1009015_1406756_PageTOC_IDLnetURL">
   </a>
   Syntax
  </h2>
  <p class="Syntax">
   <i>
    Result
   </i>
   =
   <i>
    Obj
   </i>
   -&gt;[
   <a class="MCXref_Heading_0" href="IDLnetURL.html#objects_network_1009015_1370815">
    IDLnetURL
   </a>
   ::]GetFtpDirList( [,&#160;/
   <a class="MCXref_Heading_0" href="#objects_network_1009015_1406763">
    FTP_EXPLICIT_SSL
   </a>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#objects_network_1009015_1421015">
    URL
   </a>
   =
   <i>
    string
   </i>
   ] [,&#160;/
   <a class="MCXref_Heading_0" href="#objects_network_1009015_1406768">
    SHORT
   </a>
   ] )
  </p>
  <h2 class="API">
   <a name="objects_network_1009015_1406758">
   </a>
   <a name="objects_network_1009015_1406758_PageTOC_IDLnetURL">
   </a>
   Return Value
  </h2>
  <p>
   A string array containing the directory listing. If the directory is empty, the return value is a single empty string.
  </p>
  <h2 class="API">
   <a name="objects_network_1009015_1406760">
   </a>
   <a name="objects_network_1009015_1406760_PageTOC_IDLnetURL">
   </a>
   Arguments
  </h2>
  <p>
   None.
  </p>
  <h2 class="API">
   <a name="objects_network_1009015_1406762">
   </a>
   <a name="objects_network_1009015_1406762_PageTOC_IDLnetURL">
   </a>
   Keywords
  </h2>
  <h3 class="Keyword">
   <a name="objects_network_1009015_1406763">
   </a>
   <a name="objects_network_1009015_1406763_Keywords_IDLnetURL">
   </a>
   FTP_EXPLICIT_SSL
  </h3>
  <p>
   Set this keyword to explicitly use SSL to transfer commands and data to or from the remote FTP server. It is not necessary to set this keyword when the scheme is “ftps”, (which implicitly activates SSL).
  </p>
  <p>
   See
   <a class="MCXref_Heading_0" href="IDLnetURL.html#objects_network_1009015_1404804">
    Secure FTP
   </a>
   for additional notes on SSL connections.
  </p>
  <h3 class="Keyword">
   <a name="objects_network_1009015_1421015">
   </a>
   <a name="objects_network_1009015_1406765_Keywords_IDLnetURL">
   </a>
   URL
  </h3>
  <p>
   Set this keyword equal to a string that specifies the complete URL of the location from which the directory listing is to be retrieved. If this keyword is set, the URL_* properties are ignored.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   When using a URL that contains a password, the password appears as clear text. To avoid this security problem when using a password, set the URL_* properties explicitly rather than using the URL keyword.
  </p>
  <h3 class="Keyword">
   <a name="objects_network_1009015_1406768">
   </a>
   <a name="objects_network_1009015_95410">
   </a>
   SHORT
  </h3>
  <p>
   Set this keyword to retrieve an abbreviated directory listing that does not include file statistics. FTP servers do not implement the short listing switch consistently; a server may or may not show directory entries and symbolic links correctly. If the SHORT keyword is not set, the default method behavior is to include file statistics in the directory listing, usually including file size and date.
  </p>
  <h2 class="API">
   <a name="objects_network_1009015_1406770">
   </a>
   <a name="objects_network_1009015_1406770_PageTOC_IDLnetURL">
   </a>
   Examples
  </h2>
  <p>
   The following example uses the IDLnetURL::GetFtpDirList function method to retrieve the listing from the
   <span class="Courier">
    /doc/examples/
   </span>
   directory of the
   <span class="DocumentTitleCompanyName">
    Exelis
   </span>
   FTP server.
  </p>
  <p class="ExampleCode" madcap:autonum="&lt;b&gt;Example Code: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Example Code:
     </b>
    </span>
   </span>
   The code sample
   <span class="Courier">
    url_docs_ftp_dir
    <a name="kanchor4802">
    </a>
    .pro
   </span>
   is also located in the
   <span class="Courier">
    examples/doc/objects
   </span>
   subdirectory of the IDL distribution. View the file in an IDL editor window by entering
   <span class="Courier">
    .EDIT turtledoves.pro
   </span>
   at the IDL Command Line.
  </p>
  <p class="Code">
   ;-----------------------------------------------------------------
  </p>
  <p class="Code">
   FUNCTION Url_Callback, status, progress, data
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; print the info msgs from the url object
  </p>
  <p class="Code">
   &#160;&#160;&#160;PRINT, status
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; return 1 to continue, return 0 to cancel
  </p>
  <p class="Code">
   &#160;&#160;&#160;RETURN, 1
  </p>
  <p class="Code">
   END
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ;-----------------------------------------------------------------
  </p>
  <p class="Code">
   PRO url_docs_ftp_dir
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; if the url object throws an error it will be caught here
  </p>
  <p class="Code">
   &#160;&#160;&#160;CATCH, errorStatus
  </p>
  <p class="Code">
   &#160;&#160;&#160;IF (errorStatus NE 0) THEN BEGIN
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;CATCH, /CANCEL
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;; display the error msg in a dialog
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;r = DIALOG_MESSAGE(!ERROR_STATE.msg, TITLE='URL Error', $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/ERROR)
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;PRINT, !ERROR_STATE.msg
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;; get the properties that will tell us more detail about $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;; the error.
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;oUrl-&gt;GetProperty, RESPONSE_CODE=rspCode, $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESPONSE_HEADER=rspHdr, RESPONSE_FILENAME=rspFn
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;PRINT, 'rspCode = ', rspCode
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;PRINT, 'rspHdr= ', rspHdr
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;PRINT, 'rspFn= ', rspFn
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;; since we are done we can destroy the url object
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;OBJ_DESTROY, oUrl
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;RETURN
  </p>
  <p class="Code">
   &#160;&#160;&#160;ENDIF
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; create a new url object
  </p>
  <p class="Code">
   &#160;&#160;&#160;oUrl = OBJ_NEW('IDLnetUrl')
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; the url object will make callbacks to this pro code function
  </p>
  <p class="Code">
   &#160;&#160;&#160;oUrl-&gt;SetProperty, CALLBACK_FUNCTION ='Url_Callback'
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; set VERBOSE to 1 to see more info on the transaction
  </p>
  <p class="Code">
   &#160;&#160;&#160;oUrl-&gt;SetProperty, VERBOSE = 1
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; an ftp transaction
  </p>
  <p class="Code">
   &#160;&#160;&#160;oUrl-&gt;SetProperty, URL_SCHEME = 'ftp'
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; The EXELIS VIS FTP server
  </p>
  <p class="Code">
   &#160;&#160;&#160;oUrl-&gt;SetProperty, URL_HOST = 'data.exelisvis.com'
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; name of dir to get directory listing for on the $
  </p>
  <p class="Code">
   &#160;&#160;&#160;; remote ftp server
  </p>
  <p class="Code">
   &#160;&#160;&#160;oUrl-&gt;SetProperty, URL_PATH = 'doc/examples/'
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; the appropriate username and password
  </p>
  <p class="Code">
   &#160;&#160;&#160;oUrl-&gt;SetProperty, URL_USERNAME = 'Anonymous'
  </p>
  <p class="Code">
   &#160;&#160;&#160;oUrl-&gt;SetProperty, URL_PASSWORD = ''
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; Get the directory listing
  </p>
  <p class="Code">
   &#160;&#160;&#160;dirList = oUrl-&gt;GetFtpDirList()
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;PRINT, ' directory listing: '
  </p>
  <p class="Code">
   &#160;&#160;&#160;PRINT, dirList, FORMAT='(A)'
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; we are done so we release the url object
  </p>
  <p class="Code">
   &#160;&#160;&#160;OBJ_DESTROY, oUrl
  </p>
  <p class="Code">
   END
  </p>
  <h2 class="API">
   <a name="objects_network_1009015_1406772">
   </a>
   <a name="objects_network_1009015_1406772_PageTOC_IDLnetURL">
   </a>
   Version History
  </h2>
  <table style="width: 499px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
   <col width="91px" />
   <col width="408px" />
   <tbody>
    <tr>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
      <p>
       6.4
      </p>
     </td>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
      <p>
       Introduced
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>