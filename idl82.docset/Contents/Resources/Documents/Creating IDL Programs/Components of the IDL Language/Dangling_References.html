<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   Dangling References
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#Creating IDL Programs/Components of the IDL Language/Dangling_References.html" style="">
    Open topic with navigation
   </a>
  </p>
  <h1>
   <a name="pointers_3224653378_1019636">
   </a>
   <a name="pointers_3224653378_95844">
   </a>
   Dangling References
  </h1>
  <p>
   If
   <a class="MCXref_Heading_0" href="Automatic_Garbage_Collec.html#pointers_3224653378_1018570">
    Automatic Garbage Collection
   </a>
   is turned off for a heap variable and the variable is
   <a name="kanchor5084">
   </a>
   destroyed using PTR_FREE or OBJ_DESTROY, any remaining pointer variables or object references that still refer to it are
   <i>
    dangling references
   </i>
   . Unlike lower level languages such as C, dereferencing a dangling reference will not crash or corrupt your IDL session. It will, however, fail with an error message. For example:
  </p>
  <p class="Code">
   ;Create a new heap variable.
  </p>
  <p class="Code">
   A = PTR_NEW(23)
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ;Print A and the value of the heap variable A points to.
  </p>
  <p class="Code">
   PRINT, A, *A
  </p>
  <p>
   IDL prints:
  </p>
  <p class="Code">
   &lt;PtrHeapVar13&gt;      23
  </p>
  <p>
   For example:
  </p>
  <p class="Code">
   ;Destroy the heap variable.
  </p>
  <p class="Code">
   PTR_FREE, A
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ;Try to print again.
  </p>
  <p class="Code">
   PRINT, A, *A
  </p>
  <p>
   IDL prints:
  </p>
  <p class="Code">
   % Invalid pointer: A.
  </p>
  <p class="Code">
   % Execution halted at:  $MAIN$
  </p>
  <p>
   There are several possible approaches to avoiding such errors. The best option is to structure your code such that dangling references do not occur. You can, however, verify the validity of pointers or object references before using them (via the
   <a class="MCXref_Heading_0" href="../../Reference Material/P/PTR_VALID.html#P_817877613_845070">
    PTR_VALID
   </a>
   or
   <a class="MCXref_Heading_0" href="../../Reference Material/O/OBJ_VALID.html#O_828691053_889488">
    OBJ_VALID
   </a>
   functions) or use the
   <a class="MCXref_Heading_0" href="../../Reference Material/C/CATCH.html#C_854643309_985147" target="" title="" alt="">
    CATCH
   </a>
   mechanism to recover from the effect of such a dereference.
  </p>
  <div class="mp_footer">
   Copyright Â©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>