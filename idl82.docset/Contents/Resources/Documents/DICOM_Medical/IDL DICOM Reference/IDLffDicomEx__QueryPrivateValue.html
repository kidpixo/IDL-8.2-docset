<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Additional Topics|Medical Imaging in IDL|IDL DICOM Reference|IDLffDicomEx" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   IDLffDicomEx::QueryPrivateValue
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#DICOM_Medical/IDL DICOM Reference/IDLffDicomEx__QueryPrivateValue.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../OtherTopics.html">
    Additional Topics
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="../Expanded DICOM Support in IDL/ExpandedDICOMFunctionality.html">
    Medical Imaging in IDL
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="DICOMEX_GETCONFIGFILEPAT.html">
    IDL DICOM Reference
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    IDLffDicomEx::QueryPrivateValue
   </span>
  </div>
  <h1 class="ObjMethod">
   IDLffDicomEx::QueryPrivateValue
  </h1>
  <p>
   The IDLffDicomEx::QueryPrivateValue function method checks a DICOM file for the presence of a specified private attribute. This method allows you to verify the presence of a tag prior to calling a method that requires a DICOM attribute to be present in order to succeed. Attempting to call GetPrivateValue, GetPrivateValueCount, GetPrivateValueLength, and GetPrivateVR methods all return an error when you attempt to access an attribute that does not exist in a DICOM file. GetPrivateValue also fails when attempting to access an attribute that does not have a value.
  </p>
  <h2 class="API">
   <a name="dicom_ex_4010397576_1078506">
   </a>
   <a name="dicom_ex_4010397576_1078506_PageTOC_IDLffDicomEx">
   </a>
   Syntax
  </h2>
  <p class="Syntax">
   <span class="Italic">
    Result
   </span>
   =
   <span class="Italic">
    Obj
   </span>
   -&gt;[
   <a href="IDLffDicomEx.html" class="MCXref_0">
    IDLffDicomEx
   </a>
   ::]QueryPrivateValue(
   <span class="Italic">
    PrivateCode
   </span>
   ,
   <span class="Italic">
    Group
   </span>
   ,
   <span class="Italic">
    Element
   </span>
   [,&#160;
   <a href="#dicom_ex_4010397576_1008316" class="MCXref_0">
    SEQID
   </a>
   =
   <span class="Italic">
    integer
   </span>
   ]&#160;)
  </p>
  <h2 class="API">
   <a name="dicom_ex_4010397576_1008302">
   </a>
   <a name="dicom_ex_4010397576_1008302_PageTOC_IDLffDicomEx">
   </a>
   Return Value
  </h2>
  <ul>
   <li value="1">
    0 = tag not found
   </li>
   <li value="2">
    1 = tag found but does not have a value
   </li>
   <li value="3">
    2 = tag found and has a value
   </li>
  </ul>
  <p>
   A return value of 0 or 1 indicates attempting to call GetPrivateValue would cause an error. A return value of 2 means GetPrivateValue would succeed for the specified attribute.
  </p>
  <h2 class="API">
   <a name="dicom_ex_4010397576_1008308">
   </a>
   <a name="dicom_ex_4010397576_1008308_PageTOC_IDLffDicomEx">
   </a>
   Arguments
  </h2>
  <h3 class="Argument">
   PrivateCode
  </h3>
  <p>
   A string identification code that identifies the private block of data. Within a given private group
   <span class="Italic">
    PrivateCode
   </span>
   labels are stored sequentially in the element addresses ranging from '0010' to '00FF'. For example, the string value stored at DICOM tag address '0029,0010' is the
   <span class="Italic">
    PrivateCode
   </span>
   for the block of data tagged at '0029,1000'&#160;&#8209;&#160;'0029,10FF'. The label stored at '0029,0011' would be the
   <span class="Italic">
    PrivateCode
   </span>
   for the data in tags '0029,1100' - '0029,11 FF'.
  </p>
  <h3 class="Argument">
   Group
  </h3>
  <p>
   A string identifying the group tag number of the private attribute (the first four digits of a DICOM tag). This must be an odd number and in the form 'XXXX'.
  </p>
  <h3 class="Argument">
   Element
  </h3>
  <p>
   A string identifying the last two digits of the element associated with the private attribute. This must be in the form 'XX'. Valid values are 10 - FF.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   The first two digits of the
   <span class="Italic">
    Element
   </span>
   are implicit in the
   <span class="Italic">
    PrivateCode
   </span>
   argument.
  </p>
  <h2 class="API">
   <a name="dicom_ex_4010397576_1008315">
   </a>
   <a name="dicom_ex_4010397576_1008315_PageTOC_IDLffDicomEx">
   </a>
   Keywords
  </h2>
  <h3 class="Keyword">
   <a name="dicom_ex_4010397576_1008316">
   </a>
   <a name="dicom_ex_4010397576_85151">
   </a>
   SEQID
  </h3>
  <p>
   Set this keyword to a long integer only if the private attribute exists within a sequence. Use this keyword to specify a sequence identifier as follows:
  </p>
  <ul>
   <li value="1">
    Set to a non-zero value (a sequence identifier) indicating the sequence in which the value is contained. This sequence identifier may have been returned via a previous call to the GetPrivateValue method.
   </li>
   <li value="2">
    Set to 0 or do not specify this keyword to indicate the private attribute exists at the root level of the DICOM file. This is the default.
   </li>
  </ul>
  <h2 class="API">
   <a name="dicom_ex_4010397576_1008322">
   </a>
   <a name="dicom_ex_4010397576_1008322_PageTOC_IDLffDicomEx">
   </a>
   Example
  </h2>
  <p>
   The following example verifies the existence of a private tag that has just been committed to a file. If the tag exists, a message is printed to the Output Log window. Typically you would proceed to access private values as shown in the code in the “Examples” section of
   <a href="IDLffDicomEx__GetPrivateValueLength.html#dicom_ex_4010397576_1034779" class="MCXref_0">
    IDLffDicomEx::GetPrivateValueLength
   </a>
   .
  </p>
  <p class="Code">
   PRO dicom_queryprivate_doc
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Select a DICOM file.
  </p>
  <p class="Code">
   sFile = DIALOG_PICKFILE( $
  </p>
  <p class="Code">
   PATH=FILEPATH('',SUBDIRECTORY=['examples','data']), $
  </p>
  <p class="Code">
   TITLE='Select DICOM Patient File', FILTER='*.dcm', $
  </p>
  <p class="Code">
   GET_PATH=path)
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Create a clone (aImgClone.dcm) of the selected file (sfile).
  </p>
  <p class="Code">
   oImg = OBJ_NEW('IDLffDicomEx', path + 'aImgClone.dcm', $
  </p>
  <p class="Code">
   CLONE=sfile)
  </p>
  <p class="Code">
   ; Create a sequence at the root level.
  </p>
  <p class="Code">
   vSeqId = oImg-&gt;AddPrivateSequence('VOI Min,Max', '0055', '12')
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Add items to the sequence, specifying SQ identifier returned by
  </p>
  <p class="Code">
   ; AddPrivateSequence.
  </p>
  <p class="Code">
   oImg-&gt;SetPrivateValue, 'VOI Min,Max', '0055', '13', 'IS', '215', $
  </p>
  <p class="Code">
   SEQID=vSeqID
  </p>
  <p class="Code">
   oImg-&gt;SetPrivateValue, 'VOI Min,Max', '0055', '14', 'IS', '234', $
  </p>
  <p class="Code">
   SEQID=vSeqID
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Commit the changes.
  </p>
  <p class="Code">
   oImg-&gt;Commit
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Make sure the private sequence exists.
  </p>
  <p class="Code">
   vQuery = oImg-&gt;QueryPrivateValue('VOI Min,Max', '0055', '12')
  </p>
  <p class="Code">
   If vQuery NE 0 THEN $
  </p>
  <p class="Code">
   PRINT, 'Private Sequence Exists in File.'
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Clean up object references.
  </p>
  <p class="Code">
   OBJ_DESTROY, oImg
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Note: the following line allows you to run the project
  </p>
  <p class="Code">
   ; multiple times without having to manually delete the file.
  </p>
  <p class="Code">
   ; You cannot duplicate an existing file when creating or cloning
  </p>
  <p class="Code">
   ; a DICOM file.
  </p>
  <p class="Code">
   FILE_DELETE, path +' aImgClone.dcm', /ALLOW_NONEXISTENT
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   END
  </p>
  <h2 class="API">
   <a name="dicom_ex_4010397576_1037013">
   </a>
   <a name="dicom_ex_4010397576_1037013_PageTOC_IDLffDicomEx">
   </a>
   Version History
  </h2>
  <table style="width: 499px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
   <col width="91px" />
   <col width="408px" />
   <tbody>
    <tr>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
      <p>
       6.1
      </p>
     </td>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
      <p>
       Introduced
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>