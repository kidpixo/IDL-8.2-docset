<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Additional Topics|Medical Imaging in IDL|Using IDL DICOM Network Services" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   Configuring Your System to Receive Files
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/Description.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/Figure_Format.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#DICOM_Medical/Using IDL DICOM Network Services/ConfiguringSystemToReceiveFiles.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../OtherTopics.html">
    Additional Topics
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="../Expanded DICOM Support in IDL/ExpandedDICOMFunctionality.html">
    Medical Imaging in IDL
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="Overview.html">
    Using IDL DICOM Network Services
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    Configuring Your System to Receive Files
   </span>
  </div>
  <h1>
   Configuring Your System to Receive Files
  </h1>
  <p>
   Storage is the process by which DICOM files are transferred from one DICOM device to another. In order to receive files, you need to specify a Storage SCP Application Entity for the machine that will store the files that are returned. This entity uses the Storage SCP Service, which listens at a TCP/IP port for incoming DICOM files and writes them to a defined disk directory.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   If you are running Windows XP service pack 2, you may need to modify your firewall settings in order to send and receive DICOM files. See
   <a href="TroubleshootingRetrievalOperation.html">
    Troubleshooting a Retrieval Operation
   </a>
   for details.
  </p>
  <p>
   To configure the Storage SCP Service parameters and an Application Entity, complete the following steps:
  </p>
  <ol>
   <li value="1">
    <p>
     Open the
     <span class="Bold">
      DICOM Network Services
     </span>
     utility in system configuration mode:
    </p>
    <p class="Code">
     DICOMEX_NET, /SYSTEM
    </p>
    <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
     <span class="autonumber">
      <span>
       <b>
        Note:
       </b>
      </span>
     </span>
     The required
     <span class="Bold">
      Storage SCP Application Entity
     </span>
     area is grayed out on the
     <span class="Bold">
      Configuration
     </span>
     tab unless you start the
     <span class="Bold">
      DICOM Network Services
     </span>
     utility using the SYSTEM keyword.
    </p>
   </li>
   <li value="2">
    <p>
     In the
     <span class="Bold">
      Storage SCP Application Entity
     </span>
     area, configure Storage SCP settings for the machine on which the files will be stored.
    </p>
    <table style="width: 517px;caption-side: bottom;mc-table-style: url('../../Resources/TableStyles/Figure_Format.css');" class="TableStyle_Figure_Format" cellspacing="0">
     <caption valign="bottom" style="padding-bottom: 12pt;">
     </caption>
     <p class="FigureTitle">
      System Configuration of Storage SCP Application Entity
     </p>
     <col width="517px" />
     <tbody>
      <tr>
       <td class="TableStyle_Figure_Format_Body_0_0_RowEnd_ColEnd">
        <p>
         &#160;
        </p>
        <p style="text-align: center;">
         <img src="../../Resources/Images/net_sysStorSCP.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 2.730221px;margin-bottom: 4.800953px;" />
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
     <span class="autonumber">
      <span>
       <b>
        Note:
       </b>
      </span>
     </span>
     You must define a valid directory for
     <span class="Bold">
      Storage SCP Dir
     </span>
     in order for the Storage SCP service to function correctly.
    </p>
    <table style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/Description.css');" cellspacing="0" class="TableStyle_Description">
     <col />
     <col />
     <tbody>
      <tr>
       <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
        <p>
         Application Dir
        </p>
       </td>
       <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
        <p>
         Accept the default value, IDL_AE_STOR_SCP or see
         <a href="DefiningNewApplicationEntity.html">
          Defining a New Application Entity
         </a>
         to configure a new Application Entity.
        </p>
       </td>
      </tr>
      <tr>
       <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
        <p>
         Storage SCP Dir
        </p>
       </td>
       <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
        <p>
         Enter the full path to the directory location where the retrieved files will be located, or click the
         <span class="Bold">
          ...
         </span>
         button to select or create the directory.
        </p>
        <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
         <span class="autonumber">
          <span>
           <b>
            Note:
           </b>
          </span>
         </span>
         If multiple clients access a single installation of IDL, this file storage directory will be shared among all users.
        </p>
       </td>
      </tr>
      <tr>
       <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
        <p>
         Control Port (UNIX only)
        </p>
       </td>
       <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
        <p>
         Enter the port number the Storage SCP service listens at for control messages. Typically this value is one greater than the port number used by the Storage SCP Application Entity. The default for the control port value is 2511 (this is one greater than the default port number, 2510, for the default IDL_AE_STOR_SCP Application Entity).
        </p>
        <p>
         To change this value, you must:
        </p>
        <ol>
         <li value="1">
          Stop the Storage SCP service by clicking
          <span class="Bold">
           Stop Service
          </span>
          .
         </li>
         <li value="2">
          Change the
          <span class="Bold">
           Control Port
          </span>
          value.
         </li>
         <li value="3">
          Click
          <span class="Bold">
           Save
          </span>
          to save the change.
         </li>
         <li value="4">
          Restart the Storage SCP Service by clicking
          <span class="Bold">
           Start Service
          </span>
          .
         </li>
        </ol>
        <p class="CellWarning">
         If you fail to follow these steps to change the control port value, you may not be able to stop the service from the
         <span class="Bold">
          DICOM Network Services
         </span>
         utility because the user interface and the service will not be using the same control port number.
        </p>
       </td>
      </tr>
      <tr>
       <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
        <p>
         File Extension
        </p>
       </td>
       <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
        <p>
         Accept the default
         <span class="Courier">
          dcm
         </span>
         extension or enter the extension that will be appended to files.
        </p>
       </td>
      </tr>
      <tr>
       <td class="TableStyle_Description_Body_0_0_RowEnd_ColSep">
        <p>
         Accept Any Application Entity
        </p>
       </td>
       <td class="TableStyle_Description_Body_0_0_RowEnd_ColEnd">
        <p>
         Check this box to allow the Storage SCP Service to accept files from any remote machine. Uncheck this box to accept files only from Application Entities defined in this dialog and stored in the system configuration file.
        </p>
        <p>
         When you uncheck this box, enter Application Entity information for each remote file source machine that will be queried and will send files to the directory defined by
         <span class="Bold">
          Storage SCP Dir
         </span>
         . This information must exist in the system configuration file. See
         <a href="ConfiguringApplicationEntity.html">
          Configuring an Application Entity
         </a>
         for information on configuring AEs.
        </p>
       </td>
      </tr>
     </tbody>
    </table>
   </li>
   <li value="3">
    Click
    <span class="Bold">
     Save
    </span>
    to save the Application Entity and Storage SCP directory information.
   </li>
   <li value="4">
    Stop and restart the Storage SCP Service. This step is required any time changes are made to the system configuration file. Click
    <span class="Bold">
     Stop Service
    </span>
    and then click
    <span class="Bold">
     Start Service
    </span>
    . You can then verify the service is running by clicking
    <span class="Bold">
     Update Service Status
    </span>
    .
   </li>
  </ol>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   Making changes in this dialog only affects characteristics of the local Storage SCP service Application Entity. It is not possible to change characteristics of remote SCP service nodes.
  </p>
  <p>
   Make a note of the Storage SCP Application Entity information you have just configured. You will need to add this information on the device that will be queried for files. See
   <a href="DefiningMachineToBeQueried.html">
    Defining a Machine to Be Queried
   </a>
   for instructions.
  </p>
  <p class="Tip" madcap:autonum="&lt;b&gt;Tip: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Tip:
     </b>
    </span>
   </span>
   You can use the DICOMEX_GETSTORSCPDIR function to return the location of the directory associated with the DICOM Store SCP service. See
   <a href="../IDL DICOM Reference/DICOMEX_GETSTORSCPDIR.html">
    DICOMEX_GETSTORSCPDIR
   </a>
   for details.
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>