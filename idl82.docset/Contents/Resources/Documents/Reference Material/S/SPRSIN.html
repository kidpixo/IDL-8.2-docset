<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Routines (alphabetical)|Routines: S" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   SPRSIN
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#Reference Material/S/SPRSIN.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../images/ref_part1.html">
    Routines (alphabetical)
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="S_list.html">
    Routines: S
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    SPRSIN
   </span>
  </div>
  <h1 class="Routine">
   <a name="S_820040301_1076561">
   </a>
   <a name="S_820040301_41214">
   </a>
   SPRSIN
  </h1>
  <p madcap:conditions="Reference Material.Online_Help_Only">
   <madcap:conditionaltext madcap:conditions="Reference Material.Online_Help_Only">
    <a class="MCXref_Heading_0" href="#S_820040301_52026">
     Syntax
    </a>
    |
    <a class="MCXref_Heading_0" href="#S_820040301_1135076">
     Return Value
    </a>
    |
    <a class="MCXref_Heading_0" href="#S_820040301_52028">
     Arguments
    </a>
    |
    <a class="MCXref_Heading_0" href="#S_820040301_52031">
     Keywords
    </a>
    |
    <a class="MCXref_Heading_0" href="#S_820040301_52038">
     Examples
    </a>
    |
    <a class="MCXref_Heading_0" href="#S_820040301_1068086">
     Version History
    </a>
    |
    <a class="MCXref_Heading_0" href="#S_820040301_1110409">
     See Also
    </a>
   </madcap:conditionaltext>
  </p>
  <p>
   The
   <a name="kanchor2454">
   </a>
   SPRSIN function converts an array, or list of subscripts and values, into a row-index sparse storage mode, retaining only elements with an absolute magnitude greater than or equal to the specified threshold. The list form is much more efficient than the array form if the density of the matrix is low.
  </p>
  <p>
   SPRSIN is based on the routine
   <span class="Courier">
    sprsin
   </span>
   described in section 2.7 of
   <i>
    Numerical Recipes in C: The Art of Scientific Computing
   </i>
   (Second Edition), published by Cambridge University Press, and is used by permission.
  </p>
  <h2 class="API">
   <a name="S_820040301_52026">
   </a>
   <a name="S_820040301_52026_PageTOC_SPRSIN_">
   </a>
   Syntax
  </h2>
  <p class="Syntax">
   <i>
    Result
   </i>
   = SPRSIN(
   <i>
    A
   </i>
   [,&#160;/
   <a class="MCXref_Heading_0" href="#S_820040301_58754">
    COLUMN
   </a>
   ] [,&#160;/
   <a class="MCXref_Heading_0" href="#S_820040301_52033">
    DOUBLE
   </a>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#S_820040301_52036">
    THRESHOLD
   </a>
   =
   <i>
    value
   </i>
   ] )
  </p>
  <p>
   or
  </p>
  <p class="Syntax">
   <i>
    Result
   </i>
   = SPRSIN(
   <i>
    Columns, Rows, Values, N
   </i>
   [,&#160;/
   <a class="MCXref_Heading_0" href="#S_820040301_52033">
    DOUBLE
   </a>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#S_820040301_52036">
    THRESHOLD
   </a>
   =
   <i>
    value
   </i>
   ])
  </p>
  <h2 class="API">
   <a name="S_820040301_1135076">
   </a>
   <a name="S_820040301_76211">
   </a>
   Return Value
  </h2>
  <p>
   The result is a row-indexed sparse array contained in structure form. The structure consists of two linear sparse storage vectors: SA, a vector of array values, and IJA, a vector of subscripts to the SA vector. The length of these vectors is equal to 1 plus the number of diagonal elements of the array, plus the number of off-diagonal elements with an absolute magnitude greater that or equal to the threshold value. Diagonal elements of the array are always retained even if their absolute magnitude is less than the specified threshold.
  </p>
  <h2 class="API">
   <a name="S_820040301_52028">
   </a>
   <a name="S_820040301_52028_PageTOC_SPRSIN_">
   </a>
   Arguments
  </h2>
  <h3 class="Argument">
   A
  </h3>
  <p>
   An
   <i>
    n
   </i>
   by
   <i>
    n
   </i>
   array of any type except string or complex.
  </p>
  <h3 class="Argument">
   Columns
  </h3>
  <p>
   A vector containing the column subscripts of the non-zero elements. Values must be in the range of 0 to (N-1).
  </p>
  <h3 class="Argument">
   Rows
  </h3>
  <p>
   A vector, of the same length as Column, containing the row subscripts of the non-zero elements. Values must be in the range of 0 to (N-1).
  </p>
  <h3 class="Argument">
   Values
  </h3>
  <p>
   A vector, of the same length as Column, containing the values of the non-zero elements.
  </p>
  <h3 class="Argument">
   N
  </h3>
  <p>
   The size of the resulting sparse matrix.
  </p>
  <h2 class="API">
   <a name="S_820040301_52031">
   </a>
   <a name="S_820040301_52031_PageTOC_SPRSIN_">
   </a>
   Keywords
  </h2>
  <h3 class="Keyword">
   <a name="S_820040301_58754">
   </a>
   <a name="S_820040301_58754_Keywords_SPRSIN__">
   </a>
   COLUMN
  </h3>
  <p>
   Set this keyword if the input array
   <i>
    A
   </i>
   is in column-major format (composed of column vectors) rather than in row-major format (composed of row vectors). This keyword is not allowed in the list form of the call.
  </p>
  <h3 class="Keyword">
   <a name="S_820040301_52033">
   </a>
   <a name="S_820040301_52033_Keywords_SPRSIN__">
   </a>
   DOUBLE
  </h3>
  <p>
   Set this keyword to convert the sparse array to double-precision.
  </p>
  <h3 class="Keyword">
   <a name="S_820040301_52036">
   </a>
   <a name="S_820040301_52036_Keywords_SPRSIN__">
   </a>
   THRESHOLD
  </h3>
  <p>
   Use this keyword to set the criterion for deciding the absolute magnitude of the elements to be retained in sparse storage mode. For single-precision calculations, the default value is 1.0 x 10
   <sup>
    -7
   </sup>
   . For double-precision values, the default is 1.0 x 10
   <sup>
    -14
   </sup>
   .
  </p>
  <h2 class="API">
   <a name="S_820040301_52038">
   </a>
   <a name="S_820040301_52038_PageTOC_SPRSIN_">
   </a>
   Examples
  </h2>
  <h3>
   <a name="S_820040301_1076680_Keywords_SPRSIN__">
   </a>
   Example1
  </h3>
  <p>
   Suppose we wish to convert the following array to sparse storage format:
  </p>
  <p class="Code">
   A = [[ 5.0, -0.2, 0.1], $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;[ 3.0, -2.0, 0.3], $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;[ 4.0, -1.0, 0.0]]
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Convert to sparse storage mode. All elements of the array A that
  </p>
  <p class="Code">
   ; have absolute values less than THRESH are set to zero.
  </p>
  <p class="Code">
   sparse = SPRSIN(A, THRESH = 0.5)
  </p>
  <p>
   The variable SPARSE now contains a representation of A in structure form. See the description of FULSTR for an example that restores such a structure to full storage mode.
  </p>
  <h3>
   <a name="S_820040301_1076681_Keywords_SPRSIN__">
   </a>
   Example2
  </h3>
  <p>
   This example demonstrates how to use the list form of the call to SPRSIN. The following line of code creates a sparse matrix, equivalent to a 100 by 100 identity matrix, i.e. all diagonal elements are set to 1, all other elements are zero:
  </p>
  <p class="Code">
   I100 = SPRSIN(LINDGEN(100), LINDGEN(100), REPLICATE(1.0,100), 100)
  </p>
  <h2 class="API">
   <a name="S_820040301_1068086">
   </a>
   <a name="S_820040301_1068086_PageTOC_SPRSIN_">
   </a>
   Version History
  </h2>
  <table style="width: 499px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
   <col width="91px" />
   <col width="408px" />
   <tbody>
    <tr>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
      <p>
       4.0
      </p>
     </td>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
      <p>
       Introduced
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="S_820040301_1110409">
   </a>
   <a name="S_820040301_1110409_PageTOC_SPRSIN_">
   </a>
   See Also
  </h2>
  <p>
   <a class="MCXref_Heading_0" href="../F/FULSTR.html#F_848155245_888003">
    FULSTR
   </a>
   ,
   <a class="MCXref_Heading_0" href="../L/LINBCG.html#L_826528365_937544">
    LINBCG
   </a>
   ,
   <a class="MCXref_Heading_0" href="SPRSAB.html#S_820040301_51904">
    SPRSAB
   </a>
   ,
   <a class="MCXref_Heading_0" href="SPRSAX.html#S_820040301_51970">
    SPRSAX
   </a>
   ,
   <a class="MCXref_Heading_0" href="SPRSTP.html#S_820040301_842892">
    SPRSTP
   </a>
   ,
   <a class="MCXref_Heading_0" href="../R/READ_SPR.html#R_822202989_753910">
    READ_SPR
   </a>
   ,
   <a class="MCXref_Heading_0" href="../W/WRITE_SPR.html#W_811389549_754256">
    WRITE_SPR
   </a>
  </p>
  <div class="mp_footer">
   Copyright Â©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>