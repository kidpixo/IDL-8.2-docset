<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Routines (alphabetical)|Routines: W" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   WRITE_PNG
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#Reference Material/W/WRITE_PNG.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../images/ref_part1.html">
    Routines (alphabetical)
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="W_list.html">
    Routines: W
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    WRITE_PNG
   </span>
  </div>
  <h1 class="Routine">
   <a name="W_811389549_950641">
   </a>
   <a name="W_811389549_16336">
   </a>
   WRITE_PNG
  </h1>
  <p madcap:conditions="Reference Material.Online_Help_Only">
   <madcap:conditionaltext madcap:conditions="Reference Material.Online_Help_Only">
    <a class="MCXref_Heading_0" href="#W_811389549_950645">
     Syntax
    </a>
    |
    <a class="MCXref_Heading_0" href="#W_811389549_964567">
     Arguments
    </a>
    |
    <a class="MCXref_Heading_0" href="#W_811389549_950654">
     Keywords
    </a>
    |
    <a class="MCXref_Heading_0" href="#W_811389549_1167811">
     Examples
    </a>
    |
    <a class="MCXref_Heading_0" href="#W_811389549_1240012">
     Version History
    </a>
    |
    <a class="MCXref_Heading_0" href="#W_811389549_983515">
     See Also
    </a>
   </madcap:conditionaltext>
  </p>
  <p>
   The
   <a name="kanchor2924">
   </a>
   WRITE_PNG procedure writes a 2-D or 3-D IDL variable into a Portable Network Graphics (PNG) file. The data in the file is stored using lossless compression with either 8 or 16 data bits per channel, based on the input IDL variable type. 3-D IDL variables must have the number of channels as their leading dimension (pixel interleaved). For BYTE format 2-D IDL variables, an optional palette may be stored in the image file along with a list of pixel values which are to be considered transparent by a reading program.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   IDL supports version 1.2.7 of the PNG Library.
  </p>
  <h2 class="API">
   <a name="W_811389549_950645">
   </a>
   <a name="W_811389549_950645_PageTOC_WRITE_PNG_">
   </a>
   Syntax
  </h2>
  <p class="Syntax">
   WRITE_PNG,
   <i>
    Filename
   </i>
   ,
   <i>
    Image
   </i>
   [,&#160;
   <i>
    R
   </i>
   ,
   <i>
    G
   </i>
   ,
   <i>
    B
   </i>
   ] [,&#160;/
   <a class="MCXref_Heading_0" href="#W_811389549_950656">
    ORDER
   </a>
   ]  [,&#160;
   <a class="MCXref_Heading_0" href="#TRANSPAR" target="" title="" alt="">
    TRANSPARENT
   </a>
   =
   <i>
    array
   </i>
   ] [,&#160;/
   <a class="MCXref_Heading_0" href="#W_811389549_964556">
    VERBOSE
   </a>
   ] [,
   <a href="#XRESOLUT" target="" title="" alt="" class="MCXref_0">
    XRESOLUTION
   </a>
   =
   <i>
    value
   </i>
   ] [,
   <a href="#YRESOLUT" target="" title="" alt="" class="MCXref_0">
    YRESOLUTION
   </a>
   =
   <i>
    value
   </i>
   ]
  </p>
  <h2 class="API">
   <a name="W_811389549_964567">
   </a>
   <a name="W_811389549_964567_PageTOC_WRITE_PNG_">
   </a>
   Arguments
  </h2>
  <h3 class="Argument">
   Filename
  </h3>
  <p>
   A scalar string containing the full pathname of the PNG file to write.
  </p>
  <h3 class="Argument">
   Image
  </h3>
  <p>
   The array to write into the new PNG file. If
   <i>
    Image
   </i>
   is one of the integer data types, it is converted to type unsigned integer (UINT) and written out at 16 data bits per channel. All other data types are converted to bytes and written out at 8-bits per channel.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   If
   <i>
    Image
   </i>
   is two-dimensional (single-channel) and
   <i>
    R
   </i>
   ,
   <i>
    G
   </i>
   , and
   <i>
    B
   </i>
   are provided, all input data types (including integer) are converted to bytes and written out as 8-bit data.
  </p>
  <h3 class="Argument">
   R, G, B
  </h3>
  <p>
   For single-channel images,
   <i>
    R
   </i>
   ,
   <i>
    G
   </i>
   , and
   <i>
    B
   </i>
   should contain the red, green, and blue color vectors, respectively. For multi-channel images, these arguments are ignored.
  </p>
  <h2 class="API">
   <a name="W_811389549_950654">
   </a>
   <a name="W_811389549_950654_PageTOC_WRITE_PNG_">
   </a>
   Keywords
  </h2>
  <h3 class="Keyword">
   <a name="W_811389549_950656">
   </a>
   <a name="W_811389549_950656_Keywords_WRITE_PNG__">
   </a>
   ORDER
  </h3>
  <p>
   Set this keyword to indicate that the rows of the image should be written from bottom to top. The rows are written from top to bottom by default. ORDER provides compatibility with PNG files written using versions of IDL prior to IDL 5.4, which wrote PNG files from bottom to top.
  </p>
  <h3 class="Keyword">
   <a name="TRANSPAR">
   </a>
   TRANSPARENT
  </h3>
  <p>
   Set this keyword to an array of pixel index values which are to be treated as “transparent” for the purposes of image display. This keyword is valid only if
   <i>
    Image
   </i>
   is a single-channel (color indexed) image and the R, G, B palette is provided.
  </p>
  <h3 class="Keyword">
   <a name="W_811389549_964556">
   </a>
   <a name="W_811389549_964556_Keywords_WRITE_PNG__">
   </a>
   VERBOSE
  </h3>
  <p>
   Produces additional diagnostic output during the write.
  </p>
  <h3 class="Keyword">
   <a name="XRESOLUT">
   </a>
   XRESOLUTION
  </h3>
  <p>
   Set this keyword to the horizontal resolution (in dots per inch) of the image. This keyword does not affect the actual image data. Internally, the resolution is converted to pixels per meter and stored in the PNG file header for use by other applications. The default behavior is to not write out this attribute.
  </p>
  <h3 class="Keyword">
   <a name="YRESOLUT">
   </a>
   YRESOLUTION
  </h3>
  <p>
   Set this keyword to the vertical resolution (in dots per inch) of the image. This keyword does not affect the actual image data. Internally, the resolution is converted to pixels per meter and stored in the PNG file header for use by other applications. The default behavior is to not write out this attribute.
   <a name="W_811389549_950659">
   </a>
   <a name="W_811389549_950659_Keywords_WRITE_PNG__">
   </a>
  </p>
  <h2 class="API">
   <a name="W_811389549_1167811">
   </a>
   <a name="W_811389549_950661_PageTOC_WRITE_PNG_">
   </a>
   Examples
  </h2>
  <p>
   The following lines create an image in an IDL graphics window, read it from the window and write it as a
   <span class="Courier">
    .png
   </span>
   file in the temporary directory, then read the
   <span class="Courier">
    .png
   </span>
   file and display it in the same graphics window:
  </p>
  <p class="Code">
   ; Save device settings and tell IDL to use a color table
   <br />
   DEVICE, GET_DECOMPOSED=old_decomposed
   <br />
   DEVICE, DECOMPOSED=0
   <br />
   LOADCT, 14
   <br />
   <br />
   ; Create an image and display it
   <br />
   IMAGE1 = DIST(300)
   <br />
   WINDOW, 1, XSIZE=300, YSIZE=300
   <br />
   TV, IMAGE1
   <br />
   <br />
   ; Write a PNG file to the temporary directory
   <br />
   ; Note the use of the TRUE keyword to TVRD
   <br />
   filename = FILEPATH('test.png', /TMP)
   <br />
   WRITE_PNG, filename, TVRD(/TRUE)
   <br />
   PRINT, 'File written to ', filename
   <br />
   <br />
   ; Read in the file
   <br />
   IMAGE2 = READ_PNG(filename)
   <br />
   <br />
   ; Display the IMAGE1 and IMAGE2 side by side
   <br />
   ; Note the use of the TRUE keyword to TV
   <br />
   WINDOW, 1, XSIZE=600, YSIZE=300, $
   <br />
   &#160;&#160;&#160;TITLE='Original (left) and Image read from file (right)'
   <br />
   TV, IMAGE1, 0
   <br />
   TV, IMAGE2, 1, /TRUE
   <br />
   <br />
   ; Restore device settings.
   <br />
   DEVICE, DECOMPOSED=old_decomposed
  </p>
  <h2 class="API">
   <a name="W_811389549_1240012">
   </a>
   <a name="W_811389549_950688_PageTOC_WRITE_PNG_">
   </a>
   Version History
  </h2>
  <table style="width: 499px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
   <col width="91px" />
   <col width="408px" />
   <tbody>
    <tr>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
      <p>
       5.2
      </p>
     </td>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
      <p>
       Introduced
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="W_811389549_983515">
   </a>
   <a name="W_811389549_983515_PageTOC_WRITE_PNG_">
   </a>
   See Also
  </h2>
  <p>
   <a class="MCXref_Heading_0" href="../R/READ_PNG.html#R_822202989_1045821">
    READ_PNG
   </a>
   ,
   <a class="MCXref_Heading_0" href="../Q/QUERY___Routines.html#Q_815714925_982368">
    QUERY_* Routines
   </a>
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>