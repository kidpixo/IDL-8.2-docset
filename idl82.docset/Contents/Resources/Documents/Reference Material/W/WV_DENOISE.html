<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Routines (alphabetical)|Routines: W" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   WV_DENOISE
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#Reference Material/W/WV_DENOISE.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../images/ref_part1.html">
    Routines (alphabetical)
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="W_list.html">
    Routines: W
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    WV_DENOISE
   </span>
  </div>
  <h1 class="Routine">
   <a name="ref_3320460235_1017368">
   </a>
   <a name="ref_3320460235_80479">
   </a>
   WV_DENOISE
  </h1>
  <p madcap:conditions="wavelet.Online_Help_Only">
   <madcap:conditionaltext madcap:conditions="wavelet.Online_Help_Only">
    <a class="MCXref_Heading_0" href="#ref_3320460235_1010321">
     Syntax
    </a>
    |
    <a class="MCXref_Heading_0" href="#ref_3320460235_1010323">
     Return Value
    </a>
    |
    <a class="MCXref_Heading_0" href="#ref_3320460235_1010325">
     Arguments
    </a>
    |
    <a class="MCXref_Heading_0" href="#ref_3320460235_1010471">
     Keywords
    </a>
    |
    <a class="MCXref_Heading_0" href="#ref_3320460235_1011302">
     Examples
    </a>
    |
    <a class="MCXref_Heading_0" href="#ref_3320460235_1023185">
     Version History
    </a>
    |
    <a class="MCXref_Heading_0" href="#ref_3320460235_1016215">
     See Also
    </a>
   </madcap:conditionaltext>
  </p>
  <p>
   The
   <a name="kanchor2961">
   </a>
   WV_DENOISE function uses the wavelet transform to filter (or
   <a name="kanchor2962">
   </a>
   de-noise) a multi-dimensional array.
  </p>
  <p>
   WV_DENOISE computes the discrete wavelet transform of
   <i>
    Array
   </i>
   , and then discards wavelet coefficients smaller than a certain threshold. WV_DENOISE then computes the inverse wavelet transform on the filtered coefficients and returns the result.
  </p>
  <h2 class="API">
   <a name="ref_3320460235_1010321">
   </a>
   <a name="ref_3320460235_1010321_PageTOC_WV_DENOISE_">
   </a>
   Syntax
  </h2>
  <p class="Syntax">
   <span class="Italic">
    Result
   </span>
   = WV_DENOISE(
   <span class="Italic">
    Array
   </span>
   [
   <span class="Italic">
    , Family, Order
   </span>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#ref_3320460235_1010533">
    COEFFICIENTS
   </a>
   =
   <i>
    value
   </i>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#ref_3320460235_1010481">
    CUTOFF
   </a>
   =
   <i>
    variable
   </i>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#ref_3320460235_1010485">
    DENOISE_STATE
   </a>
   =
   <i>
    variable
   </i>
   ] [,&#160;/
   <a class="MCXref_Heading_0" href="#ref_3320460235_1010505">
    DOUBLE
   </a>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#ref_3320460235_1010508">
    DWT_FILTERED
   </a>
   =
   <span class="Italic">
    variable
   </span>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#ref_3320460235_1010511">
    PERCENT
   </a>
   =
   <span class="Italic">
    value
   </span>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#ref_3320460235_1010517">
    THRESHOLD
   </a>
   =
   <span class="Italic">
    value
   </span>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#ref_3320460235_1010522">
    WPS_FILTERED
   </a>
   =
   <i>
    variable
   </i>
   ])
  </p>
  <h2 class="API">
   <a name="ref_3320460235_1010323">
   </a>
   <a name="ref_3320460235_1010323_PageTOC_WV_DENOISE_">
   </a>
   Return Value
  </h2>
  <p>
   The result is an array of the same dimensions as the input
   <span class="Italic">
    Array
   </span>
   . If
   <i>
    Array
   </i>
   is double precision or /DOUBLE is set then the result is double precision, otherwise the result is single precision.
  </p>
  <h2 class="API">
   <a name="ref_3320460235_1010325">
   </a>
   <a name="ref_3320460235_1010325_PageTOC_WV_DENOISE_">
   </a>
   Arguments
  </h2>
  <h3 class="Argument">
   Array
  </h3>
  <p>
   A one-dimensional array of length N, of floating-point or complex type.
  </p>
  <h3 class="Argument">
   Family
  </h3>
  <p>
   A scalar string giving the name of the wavelet function to use for the transform. WV_DENOISE will construct the actual function name by removing all white space and attaching a prefix of 'WV_FN_'.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   WV_DENOISE may only be used with discrete wavelets, such as WV_FN_COIFLET, WV_FN_DAUBECHIES, WV_FN_HAAR, and WV_FN_SYMLET.
  </p>
  <h3 class="Argument">
   Order
  </h3>
  <p>
   The order number, or parameter, for the wavelet function given by
   <span class="Italic">
    Family
   </span>
   . If not specified the default for the wavelet function will be used.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   If you pass in a DENOISE_STATE structure, then
   <i>
    Family
   </i>
   and
   <i>
    Order
   </i>
   may be omitted. In this case the values from DENOISE_STATE are used.
  </p>
  <h2 class="API">
   <a name="ref_3320460235_1010471">
   </a>
   <a name="ref_3320460235_1010471_PageTOC_WV_DENOISE_">
   </a>
   Keywords
  </h2>
  <h3 class="Keyword">
   <a name="ref_3320460235_1010533">
   </a>
   <a name="ref_3320460235_1010533_Keywords_WV_DENOISE_">
   </a>
   COEFFICIENTS
  </h3>
  <p>
   Set this keyword to a scalar specifying the number of wavelet coefficients to retain in the filtered wavelet transform. This keyword is ignored if keyword PERCENT is present.
  </p>
  <h3 class="Keyword">
   <a name="ref_3320460235_1010481">
   </a>
   <a name="ref_3320460235_1010481_Keywords_WV_DENOISE_">
   </a>
   CUTOFF
  </h3>
  <p>
   Set this keyword to a named variable that, upon return, will contain the cutoff value of wavelet power that was used for the threshold.
  </p>
  <h3 class="Keyword">
   <a name="ref_3320460235_1010485">
   </a>
   <a name="ref_3320460235_1010485_Keywords_WV_DENOISE_">
   </a>
   DENOISE_STATE
  </h3>
  <p>
   This is both an input and an output keyword. If this keyword is set to a named variable, then on exit, DENOISE_STATE will contain the following structure:
  </p>
  <table cellspacing="0">
   <caption valign="bottom" style="padding-bottom: 12pt;">
   </caption>
   <p class="TableTitle">
    The Structure Tags for DENOISE_STATE
   </p>
   <col width="135px" />
   <col width="115px" />
   <col width="260px" />
   <thead>
    <tr style="height: 20px;background-color: #cbcbff;">
     <td>
      <p>
       Tag
      </p>
     </td>
     <td>
      <p>
       Type
      </p>
     </td>
     <td>
      <p>
       Definition
      </p>
     </td>
    </tr>
   </thead>
   <tbody>
    <tr style="height: 15px;">
     <td>
      <p>
       FAMILY
      </p>
     </td>
     <td>
      <p>
       STRING
      </p>
     </td>
     <td>
      <p>
       Name of the wavelet function used.
      </p>
     </td>
    </tr>
    <tr style="height: 15px;">
     <td>
      <p>
       ORDER
      </p>
     </td>
     <td>
      <p>
       DOUBLE
      </p>
     </td>
     <td>
      <p>
       Order for the wavelet function.
      </p>
     </td>
    </tr>
    <tr style="height: 15px;">
     <td>
      <p>
       DWT
      </p>
     </td>
     <td>
      <p>
       FLT/DBLARR
      </p>
     </td>
     <td>
      <p>
       Discrete wavelet transform of
       <i>
        Array
       </i>
      </p>
     </td>
    </tr>
    <tr style="height: 32px;">
     <td>
      <p>
       WPS
      </p>
     </td>
     <td>
      <p>
       FLT/DBLARR
      </p>
     </td>
     <td>
      <p>
       Wavelet power spectrum, equal to |DWT|^2
      </p>
     </td>
    </tr>
    <tr style="height: 15px;">
     <td>
      <p>
       SORTED
      </p>
     </td>
     <td>
      <p>
       FLT/DBLARR
      </p>
     </td>
     <td>
      <p>
       Percent-normalized WPS, sorted
      </p>
     </td>
    </tr>
    <tr style="height: 15px;">
     <td>
      <p>
       CUMULATIVE
      </p>
     </td>
     <td>
      <p>
       FLT/DBLARR
      </p>
     </td>
     <td>
      <p>
       Cumulative sum of SORTED
      </p>
     </td>
    </tr>
    <tr style="height: 15px;">
     <td>
      <p>
       COEFFICIENTS
      </p>
     </td>
     <td>
      <p>
       LONG
      </p>
     </td>
     <td>
      <p>
       Number of coefficients retained
      </p>
     </td>
    </tr>
    <tr style="height: 15px;">
     <td>
      <p>
       PERCENT
      </p>
     </td>
     <td>
      <p>
       DOUBLE
      </p>
     </td>
     <td>
      <p>
       Percent of coefficients retained
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   If the DOUBLE keyword is set, then the arrays will be of type double.
  </p>
  <p>
   Upon input, if DENOISE_STATE is set to a structure with the above form, then DWT, WPS, SORTED, and CUMULATIVE will not be recomputed by WV_DENOISE. This is useful if you want to make multiple calls to WV_DENOISE using the same
   <i>
    Array
   </i>
   .
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   No error checking is made on the input values. The values should not be modified between calls to DENOISE_STATE.
  </p>
  <h3 class="Keyword">
   <a name="ref_3320460235_1010505">
   </a>
   <a name="ref_3320460235_1010505_Keywords_WV_DENOISE_">
   </a>
   DOUBLE
  </h3>
  <p>
   Set this keyword to force the computation to be done using double-precision arithmetic.
  </p>
  <h3 class="Keyword">
   <a name="ref_3320460235_1010508">
   </a>
   <a name="ref_3320460235_1010508_Keywords_WV_DENOISE_">
   </a>
   DWT_FILTERED
  </h3>
  <p>
   Set this keyword to a named variable in which the filtered discrete wavelet transform will be returned.
  </p>
  <h3 class="Keyword">
   <a name="ref_3320460235_1010511">
   </a>
   <a name="ref_3320460235_1010511_Keywords_WV_DENOISE_">
   </a>
   PERCENT
  </h3>
  <p>
   Set this keyword to a scalar specifying the percentage of cumulative power to retain.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   If neither COEFFICIENTS nor PERCENT is present then all of the coefficients are retained (i.e. no filtering is done).
  </p>
  <h3 class="Keyword">
   <a name="ref_3320460235_1010517">
   </a>
   <a name="ref_3320460235_1010517_Keywords_WV_DENOISE_">
   </a>
   THRESHOLD
  </h3>
  <p>
   Set this keyword to a scalar specifying the type of threshold. The actual threshold,
   <span class="Italic">
    T,
   </span>
   is set using COEFFICIENTS or PERCENT. Possible values are:
  </p>
  <p class="indent">
   <b>
    0
   </b>
   - Hard threshold (this is the default). The hard threshold sets all wavelet coefficients with magnitude less than or equal to
   <span class="Italic">
    T
   </span>
   to zero.
  </p>
  <p class="indent">
   <b>
    1
   </b>
   - Soft threshold. The soft threshold sets all DWT[i] with magnitude less than
   <span class="Italic">
    T
   </span>
   to zero, and also linearly reduces the magnitude of the each retained wavelet coefficient by
   <span class="Italic">
    T
   </span>
   : Positive coefficients are set equal to DWT[i] –
   <span class="Italic">
    T
   </span>
   , while negative coefficients are set equal to DWT[i] +
   <span class="Italic">
    T
   </span>
   .
  </p>
  <h3 class="Keyword">
   <a name="ref_3320460235_1010522">
   </a>
   <a name="ref_3320460235_1010522_Keywords_WV_DENOISE_">
   </a>
   WPS_FILTERED
  </h3>
  <p>
   Set this keyword to a named variable in which the filtered wavelet power spectrum will be returned.
  </p>
  <h2 class="API">
   <a name="ref_3320460235_1011302">
   </a>
   <a name="ref_3320460235_1011302_PageTOC_WV_DENOISE_">
   </a>
   Examples
  </h2>
  <p>
   Remove the noise from a 128 x 128 image:
  </p>
  <p class="Code">
   image = dist(128) + 5*randomn(1, 128, 128)
  </p>
  <p class="Code">
   ; Keep only 100 out of 16384 coefficients:
  </p>
  <p class="Code">
   denoise = WV_DENOISE(image, 'Daubechies', 2, COEFF=100, $
  </p>
  <p class="Code">
   &#160;&#160;&#160;DENOISE_STATE=denoise_state)
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   window, xsize=256, ysize=155
  </p>
  <p class="Code">
   tvscl, image, 0
  </p>
  <p class="Code">
   tvscl, denoise, 1
  </p>
  <p class="Code">
   xyouts, [64, 196], [5, 5], ['Image', 'Filtered'], $
  </p>
  <p class="Code">
   &#160;&#160;&#160;/device, align=0.5, charsize=2
  </p>
  <p class="Code">
   print, 'Percent of power retained: ', denoise_state.percent
  </p>
  <p>
   IDL prints:
  </p>
  <p class="Code">
   Percent of power retained:        93.151491
  </p>
  <p>
   Change to a “soft” threshold (use DENOISE_STATE to avoid re-computing):
  </p>
  <p class="Code">
   denoise2 = WV_DENOISE(image, COEFF=100, $
  </p>
  <p class="Code">
   &#160;&#160;&#160;DENOISE_STATE=denoise_state, THRESHOLD=1)
  </p>
  <p>
   &#160;
  </p>
  <table cellpadding="0" cellspacing="0" style="border-spacing-x: 0;border-spacing-y: 0;border-collapse: collapse;border-color: black;width: 517px;caption-side: bottom;" class="Default" height="176px">
   <caption valign="bottom" style="padding-bottom: 12pt;">
   </caption>
   <p class="FigureTitle">
    Example of De-Noising an Image.
   </p>
   <col width="517px" />
   <tbody>
    <tr style="height: 164px;">
     <td>
      <p>
       &#160;
      </p>
      <p style="text-align: center;">
       <img src="../../Resources/Images/waveref1.gif" style="width: 245.76px;height: 148.799px;margin-left: 3.19968px;margin-top: 2.00016px;margin-right: 0.1094477px;" />
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="ref_3320460235_1023185">
   </a>
   <a name="ref_3320460235_1023185_PageTOC_WV_DENOISE_">
   </a>
   Version History
  </h2>
  <p>
   &#160;
  </p>
  <table cellpadding="0" cellspacing="0" class="Default" height="28px" style="border-spacing-x: 0;border-spacing-y: 0;border-collapse: collapse;border-color: black;width: 499px;caption-side: top;">
   <col width="91px" />
   <col width="408px" />
   <tbody>
    <tr style="height: 13px;">
     <td>
      <p>
       5.4
      </p>
     </td>
     <td>
      <p>
       Introduced
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="ref_3320460235_1016215">
   </a>
   <a name="ref_3320460235_1016215_PageTOC_WV_DENOISE_">
   </a>
   See Also
  </h2>
  <p>
   <a class="MCXref_Heading_0" href="WV_DWT.html#ref_3320460235_1010303" target="" title="" alt="">
    WV_DWT
   </a>
   ,
   <a class="MCXref_Heading_0" href="WV_TOOL_DENOISE.html#ref_3320460235_1004900" target="" title="" alt="">
    WV_TOOL_DENOISE
   </a>
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>