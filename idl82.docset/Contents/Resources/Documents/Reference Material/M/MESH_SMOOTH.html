<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Routines (alphabetical)|Routines: M" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   MESH_SMOOTH
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/NoLines.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/Figure_Format.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#Reference Material/M/MESH_SMOOTH.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../images/ref_part1.html">
    Routines (alphabetical)
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="M_list.html">
    Routines: M
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    MESH_SMOOTH
   </span>
  </div>
  <h1 class="Routine">
   <a name="M_824365677_929954">
   </a>
   <a name="M_824365677_17023">
   </a>
   MESH_SMOOTH
  </h1>
  <p madcap:conditions="Reference Material.Online_Help_Only">
   <madcap:conditionaltext madcap:conditions="Reference Material.Online_Help_Only">
    <a class="MCXref_Heading_0" href="#M_824365677_948523">
     Syntax
    </a>
    |
    <a class="MCXref_Heading_0" href="#M_824365677_948525">
     Return Value
    </a>
    |
    <a class="MCXref_Heading_0" href="#M_824365677_948527">
     Arguments
    </a>
    |
    <a class="MCXref_Heading_0" href="#M_824365677_948532">
     Keywords
    </a>
    |
    <a class="MCXref_Heading_0" href="#M_824365677_953363">
     Examples
    </a>
    |
    <a class="MCXref_Heading_0" href="#M_824365677_970702">
     Version History
    </a>
    |
    <a class="MCXref_Heading_0" href="#M_824365677_972977">
     See Also
    </a>
   </madcap:conditionaltext>
  </p>
  <p>
   The
   <a name="kanchor1870">
   </a>
   MESH_SMOOTH function performs spatial smoothing on a polygon mesh. This function smooths a mesh by applying Laplacian smoothing to each vertex, as described by the following formula:
  </p>
  <p style="text-align: center;">
   <img src="../../images/19_25.jpg" />
  </p>
  <p>
   where:
   <madcap:conditionaltext madcap:conditions="Reference Material.Online_Help_Only">
   </madcap:conditionaltext>
  </p>
  <p>
   &#160;
  </p>
  <table style="width: 481px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/NoLines.css');" cellspacing="0" class="TableStyle_NoLines">
   <col width="53px" />
   <col width="428px" />
   <tbody>
    <tr>
     <td class="TableStyle_NoLines_Body_0_0_RowSep_ColSep">
      <p>
       <img src="../../images/19_12.jpg" />
      </p>
     </td>
     <td class="TableStyle_NoLines_Body_0_0_RowSep_ColEnd">
      <p>
       is vertex
       <i>
        i
       </i>
       for iteration
       <i>
        n
       </i>
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_NoLines_Body_0_0_RowSep_ColSep">
      <p>
       λ
      </p>
     </td>
     <td class="TableStyle_NoLines_Body_0_0_RowSep_ColEnd">
      <p>
       is the smoothing factor
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_NoLines_Body_0_0_RowEnd_ColSep">
      <p>
       M
      </p>
     </td>
     <td class="TableStyle_NoLines_Body_0_0_RowEnd_ColEnd">
      <p>
       is the number of vertices that share a common edge with
       <i>
        x
       </i>
       <i style="font-size: 80%;vertical-align: sub;">
        i
       </i>
       <i>
        n
       </i>
       <span class="_Override" style="font-size: 10pt;line-height: 12pt;">
        .
       </span>
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="M_824365677_948523">
   </a>
   <a name="M_824365677_948523_PageTOC_MESH_SMOOTH_">
   </a>
   Syntax
  </h2>
  <p class="Syntax">
   <i>
    Result
   </i>
   = MESH_SMOOTH (
   <i>
    Verts
   </i>
   ,
   <i>
    Conn
   </i>
   [,&#160;
   <a class="MCXref_Heading_0" href="#M_824365677_948533">
    ITERATIONS
   </a>
   =
   <span class="_Override" style="font-style: italic;">
    value
   </span>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#M_824365677_948535">
    FIXED_VERTICES
   </a>
   =
   <span class="_Override" style="font-style: italic;">
    array
   </span>
   ] [,&#160;/
   <a class="MCXref_Heading_0" href="#M_824365677_948537">
    FIXED_EDGE_VERTICES
   </a>
   ] [,&#160;
   <a class="MCXref_Heading_0" href="#M_824365677_948539">
    LAMBDA
   </a>
   =
   <span class="_Override" style="font-style: italic;">
    value
   </span>
   ])
  </p>
  <h2 class="API">
   <a name="M_824365677_948525">
   </a>
   <a name="M_824365677_948525_PageTOC_MESH_SMOOTH_">
   </a>
   Return Value
  </h2>
  <p>
   The output of this function is resulting [3,
   <i>
    n
   </i>
   ] array of modified vertices.
  </p>
  <h2 class="API">
   <a name="M_824365677_948527">
   </a>
   <a name="M_824365677_948527_PageTOC_MESH_SMOOTH_">
   </a>
   Arguments
  </h2>
  <h3 class="Argument">
   Verts
  </h3>
  <p>
   Input array of polygonal vertices [3,
   <i>
    n
   </i>
   ].
  </p>
  <h3 class="Argument">
   Conn
  </h3>
  <p>
   Input polygonal mesh connectivity array.
  </p>
  <h2 class="API">
   <a name="M_824365677_948532">
   </a>
   <a name="M_824365677_948532_PageTOC_MESH_SMOOTH_">
   </a>
   Keywords
  </h2>
  <h3 class="Keyword">
   <a name="M_824365677_948533">
   </a>
   <a name="M_824365677_948533_Keywords_MESH_SMOOTH__">
   </a>
   ITERATIONS
  </h3>
  <p>
   Number of iterations to smooth. The default value is 50.
  </p>
  <h3 class="Keyword">
   <a name="M_824365677_948535">
   </a>
   <a name="M_824365677_948535_Keywords_MESH_SMOOTH__">
   </a>
   FIXED_VERTICES
  </h3>
  <p>
   Set this keyword to an array of vertex indices which are not to be modified by the smoothing.
  </p>
  <h3 class="Keyword">
   <a name="M_824365677_948537">
   </a>
   <a name="M_824365677_948537_Keywords_MESH_SMOOTH__">
   </a>
   FIXED_EDGE_VERTICES
  </h3>
  <p>
   Set this keyword to specify that mesh outer edge vertices are not to be modified by the smoothing.
  </p>
  <h3 class="Keyword">
   <a name="M_824365677_948539">
   </a>
   <a name="M_824365677_948539_Keywords_MESH_SMOOTH__">
   </a>
   LAMBDA
  </h3>
  <p>
   Smoothing factor. The default value is 0.05.
  </p>
  <h2 class="API">
   <a name="M_824365677_953363">
   </a>
   <a name="M_824365677_953363_PageTOC_MESH_SMOOTH_">
   </a>
   Examples
  </h2>
  <p>
   This example
   <a name="kanchor1871">
   </a>
   smooths a rectangular mesh containing a spike. First, we create a rectangular mesh made up 10 columns and 5 rows of
   <a name="kanchor1872">
   </a>
   vertices. The vertices are connected with right triangles. The mesh is placed in a
   <a name="kanchor1873">
   </a>
   polygon object, which is added to a model object. The model is displayed in the XOBJVIEW utility. The XOBJVEW utility allows you to click-and-drag the polygon object to rotate and translate it. See
   <a class="MCXref_Heading_0" href="../X/XOBJVIEW.html#X_800576109_956910">
    XOBJVIEW
   </a>
   for more information on this utility.
  </p>
  <p>
   When you quit out of the first XOBJVIEW display, the second XOBJVIEW display will appear. The center vertex of the top row is displaced in the y-direction. This displacement causes the center of the top to spike out away from the mesh. After you quit out of the second display, the third display shows the result of smoothing the entire mesh. The final display shows the results of smoothing the spike with all the other vertices fixed.
  </p>
  <p>
   The example is split into multiple segments; click on each segment to enter the code at the IDL command prompt.
  </p>
  <p class="Code">
   ; Initialize mesh size parameters.
   <br />
   nX = 10
   <br />
   nY = 5
   <br />
   <br />
   ; Initialize the x coordinates of the mesh's vertices.
   <br />
   xVertices = FINDGEN(nX) # REPLICATE(1., nY)
   <br />
   PRINT, 'xVertices:  '
   <br />
   PRINT, xVertices, FORMAT = '(10F6.1)'
   <br />
   <br />
   ; Initialize the y coordinates of the mesh's vertices.
   <br />
   yVertices = REPLICATE(1., nX) # FINDGEN(nY)
   <br />
   PRINT, 'yVertices:  '
   <br />
   PRINT, yVertices, FORMAT = '(10F6.1)'
   <br />
   <br />
   ; Derive the overall vertices of the mesh.
   <br />
   vertices = FLTARR(3, (nX*nY))
   <br />
   vertices[0, *] = xVertices
   <br />
   vertices[1, *] = yVertices
   <br />
   PRINT, 'vertices:  '
   <br />
   PRINT, vertices, FORMAT = '(3F6.1)'
   <br />
   <br />
   ; Triangulate the mesh to establish connectivity.
   <br />
   TRIANGULATE, xVertices, yVertices, triangles
   <br />
   trianglesSize = SIZE(triangles, /DIMENSIONS)
   <br />
   polygons = LONARR(4, trianglesSize[1])
   <br />
   polygons[0, *] = 3
   <br />
   polygons[1, 0] = triangles
   <br />
   PRINT, 'polygons:  '
   <br />
   PRINT, polygons, FORMAT = '(4I6)'
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Derive connectivity from the resulting triangulation.
   <br />
   connectivity = REFORM(polygons, N_ELEMENTS(polygons))
   <br />
   <br />
   ; Initialize a model for the display.
   <br />
   oModel = OBJ_NEW('IDLgrModel')
   <br />
   <br />
   ; Initialize a polygon object to contain the mesh.
   <br />
   oPolygon = OBJ_NEW('IDLgrPolygon', vertices, $
   <br />
   &#160;&#160;&#160;POLYGONS = connectivity, COLOR = [0, 128, 0], $
   <br />
   &#160;&#160;&#160;STYLE = 1)
   <br />
   <br />
   ; Add the polygon to the model.
   <br />
   oModel-&gt;Add, oPolygon
   <br />
   <br />
   ; Display the model.
   <br />
   XOBJVIEW, oModel, /BLOCK, $
   <br />
   &#160;&#160;&#160;TITLE = 'Original Mesh'
   <br />
   <br />
   ; Introduce an irregular vertex by drastically changing
   <br />
   ; a single y coordinate.
   <br />
   vertices[1, 45] = 10.
   <br />
   <br />
   ; Update polygon with new vertices.
   <br />
   oPolygon-&gt;SetProperty, DATA = vertices
   <br />
   <br />
   ; Display change.
   <br />
   XOBJVIEW, oModel, /BLOCK, $
   <br />
   &#160;&#160;&#160;TITLE = 'Mesh with New Irregular Vertex'
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Smooth entire mesh to reduce the effect of the
   <br />
   ; irregular vertex.
   <br />
   smoothedVertices = MESH_SMOOTH(vertices, connectivity)
   <br />
   <br />
   ; Update polygon and display results.
   <br />
   oPolygon-&gt;SetProperty, DATA = smoothedVertices
   <br />
   XOBJVIEW, oModel, /BLOCK, $
   <br />
   &#160;&#160;&#160;TITLE = 'Smoothing with No Fixed Vertices'
   <br />
   <br />
   ; Determine which vertices should be fixed.  Basically,
   <br />
   ; all of the vertices should be fixed except for the
   <br />
   ; irregular vertex.
   <br />
   fixed = LINDGEN((nX*nY) - 1)
   <br />
   fixed[45] = fixed[45:*] + 1
   <br />
   <br />
   ; Smooth mesh with resulting fixed vertices.
   <br />
   smoothedVertices = MESH_SMOOTH(vertices, connectivity, $
   <br />
   &#160;&#160;&#160;FIXED_VERTICES = fixed)
   <br />
   <br />
   ; Update polygon and display results.
   <br />
   oPolygon-&gt;SetProperty, DATA = smoothedVertices
   <br />
   XOBJVIEW, oModel, /BLOCK, $
   <br />
   &#160;&#160;&#160;TITLE = 'Smoothing with Almost All Vertices Fixed'
   <br />
   <br />
   ; Cleanup object references.
   <br />
   OBJ_DESTROY, [oModel]
  </p>
  <p>
   The results for this example are shown in the following figure: the spiked mesh (left), and the two smoothed meshes (right).
  </p>
  <table style="width: 517px;caption-side: bottom;mc-table-style: url('../../Resources/TableStyles/Figure_Format.css');" class="TableStyle_Figure_Format" cellspacing="0">
   <caption valign="bottom" style="padding-bottom: 12pt;">
   </caption>
   <p class="FigureTitle">
    The Spiked Mesh (left) and the Two Smoothed Meshes (right)
   </p>
   <col width="517px" />
   <tbody>
    <tr>
     <td class="TableStyle_Figure_Format_Body_0_0_RowEnd_ColEnd">
      <p>
       &#160;
      </p>
      <p style="text-align: center;">
       <img src="../../images/mesh_smooth.gif" style="margin-left: 13.5px;margin-top: 4.5px;margin-right: 8.399536px;margin-bottom: 9.308167px;" />
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="M_824365677_970702">
   </a>
   <a name="M_824365677_970702_PageTOC_MESH_SMOOTH_">
   </a>
   Version History
  </h2>
  <table style="width: 499px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
   <col width="91px" />
   <col width="408px" />
   <tbody>
    <tr>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
      <p>
       5.5
      </p>
     </td>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
      <p>
       Introduced
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="M_824365677_972977">
   </a>
   <a name="M_824365677_972977_PageTOC_MESH_SMOOTH_">
   </a>
   See Also
  </h2>
  <p>
   <a class="MCXref_Heading_0" href="MESH_CLIP.html#M_824365677_888450">
    MESH_CLIP
   </a>
   ,
   <a class="MCXref_Heading_0" href="MESH_DECIMATE.html#M_824365677_953124">
    MESH_DECIMATE
   </a>
   ,
   <a class="MCXref_Heading_0" href="MESH_ISSOLID.html#M_824365677_929914">
    MESH_ISSOLID
   </a>
   ,
   <a class="MCXref_Heading_0" href="MESH_MERGE.html#M_824365677_929930">
    MESH_MERGE
   </a>
   ,
   <a class="MCXref_Heading_0" href="MESH_NUMTRIANGLES.html#M_824365677_929942">
    MESH_NUMTRIANGLES
   </a>
   ,
   <a class="MCXref_Heading_0" href="MESH_OBJ.html#M_824365677_929903">
    MESH_OBJ
   </a>
   ,
   <a class="MCXref_Heading_0" href="MESH_SURFACEAREA.html#M_824365677_929966">
    MESH_SURFACEAREA
   </a>
   ,
   <a class="MCXref_Heading_0" href="MESH_VALIDATE.html#M_824365677_929978">
    MESH_VALIDATE
   </a>
   ,
   <a class="MCXref_Heading_0" href="MESH_VOLUME.html#M_824365677_929990">
    MESH_VOLUME
   </a>
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>