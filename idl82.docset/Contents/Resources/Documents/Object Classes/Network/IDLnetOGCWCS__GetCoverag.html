<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="IDL Programming|Objects|Network Object Classes|IDLnetOGCWCS" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-US" xml:lang="en-US" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="idl.xml" madcap:searchtype="Stem">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   IDLnetOGCWCS::GetCoverage
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/Description.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../idl_CSH.html#Object Classes/Network/IDLnetOGCWCS__GetCoverag.html" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../IDL Programming.html">
    IDL Programming
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="../ref_part2.html">
    Objects
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="objects_network.html">
    Network Object Classes
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    IDLnetOGCWCS::GetCoverage
   </span>
  </div>
  <h1 class="ObjMethod">
   <a name="objects_network_1009015_1387554">
   </a>
   <a name="objects_network_1009015_42852">
   </a>
   I
   <a name="kanchor4770">
   </a>
   DLnetOGCWCS::GetCoverage
  </h1>
  <p>
   <madcap:conditionaltext madcap:conditions="Reference Material.Online_Help_Only">
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1385166">
     Syntax
    </a>
   </madcap:conditionaltext>
   <madcap:conditionaltext madcap:conditions="Reference Material.Online_Help_Only">
    |
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1385171">
     Return Value
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1385173">
     Arguments
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1385306">
     Keywords
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1385308">
     Examples
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1390198">
     Version History
    </a>
    |
    <a class="MCXref_Heading_0" href="#objects_network_1009015_1385317">
     See Also
    </a>
   </madcap:conditionaltext>
  </p>
  <p>
   The IDLnetOGCWCS::GetCoverage function method retrieves a data file from a remote OGC WCS server, and writes the file to disk. The file location is specified by the
   <a class="MCXref_Heading_0" href="IDLnetOGCWCS_Properties.html#objects_network_1009015_1383867">
    COVERAGE_FILENAME
   </a>
   property, and will be overwritten if this property value remains unchanged between GetCoverage requests.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   The
   <a class="MCXref_Heading_0" href="IDLnetOGCWCS_Properties.html#objects_network_1009015_1384457">
    URL_PATH
   </a>
   and
   <a class="MCXref_Heading_0" href="IDLnetOGCWCS_Properties.html#objects_network_1009015_1384418">
    URL_HOSTNAME
   </a>
   properties must be set before requesting information from a remote WCS server. You can either set these properties manually or pass a URL to the
   <a class="MCXref_Heading_0" href="IDLnetOGCWCS__ParseUrl.html#objects_network_1009015_1386464">
    IDLnetOGCWCS::ParseUrl
   </a>
   method prior to making a request. If you are dealing with a proxy server, you must also set the
   <a class="MCXref_Heading_0" href="IDLnetOGCWCS_Properties.html#objects_network_1009015_1384151">
    PROXY_HOSTNAME
   </a>
   and
   <a class="MCXref_Heading_0" href="IDLnetOGCWCS_Properties.html#objects_network_1009015_1384207">
    PROXY_PORT
   </a>
   properties to the correct values.
  </p>
  <p>
   This method returns only when one of the following occur:
  </p>
  <ul>
   <li value="1">
    Completes retrieval of information from server
   </li>
   <li value="2">
    Encounters an HTTP error
   </li>
   <li value="3">
    Encounters an OGC exception
   </li>
   <li value="4">
    Responds to a cancel request as specified in a callback return value
   </li>
  </ul>
  <p>
   You can implement a callback to return status information during the request by setting the
   <a class="MCXref_Heading_0" href="IDLnetOGCWCS_Properties.html#objects_network_1009015_1383740">
    CALLBACK_FUNCTION
   </a>
   property. You can also use a callback to cancel a request. See
   <a class="MCXref_Heading_0" href="IDLnetOGCWCS.html#objects_network_1009015_1402515">
    Using Callbacks with the IDLnetOGCWCS Object
   </a>
   for details. This method will throw an error if the GetCoverage request fails.
  </p>
  <h2 class="API">
   <a name="objects_network_1009015_1385166">
   </a>
   <a name="objects_network_1009015_72353">
   </a>
   Syntax
  </h2>
  <p class="Syntax">
   <i>
    Result = Obj
   </i>
   -&gt;[
   <a class="MCXref_Heading_0" href="IDLnetOGCWCS.html#objects_network_1009015_1403015">
    IDLnetOGCWCS
   </a>
   ::]GetCoverage(
   <i>
    Coverage_Request
   </i>
   )
  </p>
  <h2 class="API">
   <a name="objects_network_1009015_1385171">
   </a>
   <a name="objects_network_1009015_31188">
   </a>
   Return Value
  </h2>
  <p>
   The return value is string containing the path to the file returned by this request or an empty string if no file was returned.
  </p>
  <h2 class="API">
   <a name="objects_network_1009015_1385173">
   </a>
   <a name="objects_network_1009015_79586">
   </a>
   Arguments
  </h2>
  <h3 class="Argument">
   <a name="objects_network_1009015_66191">
   </a>
   Coverage_Request
  </h3>
  <p>
   The
   <i>
    Coverage_Request
   </i>
   argument must be a string that contains the required key-value pairs separated by the
   <span class="Courier">
    &amp;
   </span>
   character. These elements can be extracted from the structures returned by the
   <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385325">
    IDLnetOGCWCS::GetCoverageOffering
   </a>
   method. The required elements are shown in the following table, and match those described in OGC Web Coverage Service (WCS) specification. See the OGC web site (
   <a href="http://www.opengeospatial.org">
    www.opengeospatial.org
   </a>
   ) for specification details.
  </p>
  <table style="width: 504px;caption-side: bottom;mc-table-style: url('../../Resources/TableStyles/Description.css');" cellspacing="0" class="TableStyle_Description">
   <caption valign="bottom" style="padding-bottom: 12pt;">
   </caption>
   <p class="TableTitle">
    Required Elements of a GetCoverage Request
   </p>
   <col width="158px" />
   <col width="346px" />
   <thead>
    <tr>
     <td class="TableStyle_Description_Head_0_0_RowSep_ColSep">
      <p>
       Key-value Pair
      </p>
     </td>
     <td class="TableStyle_Description_Head_0_0_RowSep_ColEnd">
      <p>
       Description
      </p>
     </td>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
      <p>
       COVERAGE=name
      </p>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
      <p>
       Name of the available coverage. Required.
      </p>
      <p>
       Source — in the
       <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385413">
        Main Coverage Offering Structure
       </a>
       see
       <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385434">
        CO_NAME
       </a>
       .
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
      <p>
       CRS=crs_identifier
      </p>
     </td>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
      <p>
       Coordinate Reference System used for the request. Required.
      </p>
      <p>
       Source — in the
       <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1386012">
        CRS Structure
       </a>
       see:
      </p>
      <ul>
       <li value="1">
        <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1386024">
         REQUEST_RESPONSE
        </a>
       </li>
       <li value="2">
        <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1386030">
         REQUEST
        </a>
       </li>
       <li value="3">
        <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1386042">
         NATIVE
        </a>
       </li>
      </ul>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
      <p>
       RESPONSE_CRS= crs_identifier
      </p>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
      <p>
       Coordinate Reference System to use for the coverage response. Optional. The default is the request CRS.
      </p>
      <p>
       Source — in the
       <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1386012">
        CRS Structure
       </a>
       see
       <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1386036" target="" title="" alt="">
        RESPONSE
       </a>
       .
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
      <p>
       BBOX=minx, miny, maxx, maxy, minz, maxz
      </p>
     </td>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
      <p>
       Request a coverage subset as defined by the bounding box coordinate pairs, ordered according to the CRS parameter reference system. Either BBOX or TIME is required.
      </p>
      <p>
       Source — in the
       <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385624">
        Spat_Dom_LonLatEnv Structure
       </a>
       , see:
      </p>
      <ul>
       <li value="1">
        <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385645">
         POS1
        </a>
       </li>
       <li value="2">
        <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385658">
         POS2
        </a>
       </li>
      </ul>
      <p>
       If the WCS server supports returning a subset of the data, then the bounding box values can be any that fall inside of the bounding box.
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
      <p>
       TIME=time1, time2, ... or TIME=min/max/res, ...
      </p>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
      <p>
       Request a coverage subset defined by specific time instances or intervals expressed in an extended ISO 8601 syntax. This parameter is optional if the selected layer has a default time, fixed time, or no time defined. Either BBOX or TIME is required.
      </p>
      <p>
       Source — in the
       <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385624">
        Spat_Dom_LonLatEnv Structure
       </a>
       , see the following fields:
      </p>
      <ul>
       <li value="1">
        <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385671">
         TM_POS1
        </a>
       </li>
       <li value="2">
        <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385676">
         TM_POS2
        </a>
       </li>
      </ul>
      <p>
       If the WCS server supports returning a subset of the data, then the time values can be any that occur within the available time span.
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
      <p>
       PARAMETER=val1, val2, .. or
       <br />
       PARAMETER= min/max/res
      </p>
     </td>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
      <p>
       (Only for range sets with compound values.) Use a constraining PARAMETER to request a subset where PARAMETER is a variable string that matches the name of a parameter listed in the selected coverage’s range description set. For example:
      </p>
      <p class="Code">
       band=1,5,3 (e.g., radiance values in bands 1, 5, 3)
      </p>
      <p class="Code">
       age=0/18 (e.g., counts of people with ages under 18 yrs.)
      </p>
      <p>
       Optional when the range component has default parameter values. Set this only if the WCS server supports optional parameters.
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
      <p>
       WIDTH=w (integer)
      </p>
      <p>
       HEIGHT=h (integer)
      </p>
      <p>
       [DEPTH=d (integer)]
      </p>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
      <p>
       Request a grid defined by integer values for width, height and depth (the number of gridpoints if a 3D grid).
      </p>
      <p>
       Either these parameters (including DEPTH if 3D) or RESX, RESY, and RESZ (if 3D) are required.
      </p>
      <p>
       See the elements in the
       <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385688">
        Spat_Dom_Grid Structure
       </a>
       in order to determine the original resolution of the data.
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
      <p>
       RESX=x (double)
      </p>
      <p>
       RESY=y (double)
      </p>
      <p>
       [RESZ=z (double)]
      </p>
     </td>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
      <p>
       Use when requesting georectified grid coverages. Request a coverage subset defined using specific spatial resolutions along each axis of the CRS reply. Units of the values are appropriate for each axis of the CRS. Either these parameters or WIDTH, HEIGHT, and DEPTH (if a 3D grid) are required.
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowEnd_ColSep">
      <p>
       FORMAT=format
      </p>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowEnd_ColEnd">
      <p>
       Define the requested output format of the coverage. This must be one of the mandatory formats. Required.
      </p>
      <p>
       Source — in the
       <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385413">
        Main Coverage Offering Structure
       </a>
       see:
      </p>
      <ul>
       <li value="1">
        <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385553">
         FORMATS
        </a>
       </li>
       <li value="2">
        <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385559">
         NATIVE_FORMAT
        </a>
       </li>
      </ul>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="objects_network_1009015_1385306">
   </a>
   <a name="objects_network_1009015_23096">
   </a>
   Keywords
  </h2>
  <p>
   None
  </p>
  <h2 class="API">
   <a name="objects_network_1009015_1385308">
   </a>
   <a name="objects_network_1009015_72566">
   </a>
   Examples
  </h2>
  <p>
   The following example connects to an OGC server and calls GetCapabilities, GetCoverageOfferingBriefs, DescribeCoverage, GetCoverageOffering and GetCoverage to return data from the server. Elements of the structure returned by GetCoverageOffering provide the required key-value pair elements of the query defining the coverage data to return.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   You may need to replace the URL in the following example as there is no guarantee that the given OCG server will be available when you attempt to establish the connection.
  </p>
  <p class="Code">
   FUNCTION ogcwcs_callback,  StatusInfo, CallbackData
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   PRINT, StatusInfo
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Indicate all is well.
  </p>
  <p class="Code">
   vCancelFlag = 1
  </p>
  <p class="Code">
   RETURN, vCancelFlag
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   END
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   PRO ogc_wcs_getcoverage_doc
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Use the GetCoverage method to return data from an OGC server.
  </p>
  <p class="Code">
   ; The GetCoverageOffering structure provides parameters required
  </p>
  <p class="Code">
   ; for the GetCoverage request.
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; This example queries an OGC server at the following URL. Change
  </p>
  <p class="Code">
   ; the value of this variable to access a server of your choice.
  </p>
  <p class="Code">
   url="http://data.exelisvis.com:80/cgi-bin" + $
  </p>
  <p class="Code">
   &#160;&#160;&#160;"/mapserv.exe?MAP=/OGC_Data/WCS/wcs_demo.map" + $
  </p>
  <p class="Code">
   &#160;&#160;&#160;"&amp;SERVICE=WCS&amp;VERSION=1.0.0&amp;REQUEST=GetCapabilities"
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Catch error.
  </p>
  <p class="Code">
   CATCH, errorStatus
  </p>
  <p class="Code">
   IF (errorStatus NE 0) THEN BEGIN
  </p>
  <p class="Code">
   &#160;&#160;&#160;CATCH,/CANCEL
  </p>
  <p class="Code">
   &#160;&#160;&#160;r = DIALOG_MESSAGE(!ERROR_STATE.MSG, $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;TITLE='OGC WCS Error', /ERROR)
  </p>
  <p class="Code">
   &#160;&#160;&#160;PRINT, !ERROR_STATE.MSG
  </p>
  <p class="Code">
   &#160;&#160;&#160;IF OBJ_VALID(oWcs) THEN OBJ_DESTROY, oWcs
  </p>
  <p class="Code">
   &#160;&#160;&#160;RETURN
  </p>
  <p class="Code">
   ENDIF
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Create an IDLnetOGCWCS object and parse a known, working URL to
  </p>
  <p class="Code">
   ; set mandatory properties.
  </p>
  <p class="Code">
   oWcs = OBJ_NEW("IDLnetOGCWCS", $
  </p>
  <p class="Code">
   &#160;&#160;&#160;CALLBACK_FUNCTION="ogcwcs_callback")
  </p>
  <p class="Code">
   oWcs-&gt;ParseUrl, url
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Return and parse a brief description of all data holdings
  </p>
  <p class="Code">
   ; on the WCS server.
  </p>
  <p class="Code">
   count = oWCS-&gt;GetCapabilities()
  </p>
  <p class="Code">
   arrName=' '
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Make sure the server returned some coverage offering briefs.
  </p>
  <p class="Code">
   IF (count NE 0) THEN BEGIN
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; Return information about the holding using the
  </p>
  <p class="Code">
   &#160;&#160;&#160;; GetCoverageOfferingBriefs method.
  </p>
  <p class="Code">
   &#160;&#160;&#160;briefStruct = oWCS-&gt;GetCoverageOfferingBriefs $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;(COUNT=briefcount, NUMBER=1)
  </p>
  <p class="Code">
   &#160;&#160;&#160;PRINT, "Returning structures for ", + briefcount, + " briefs"
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; Access the name element of the GetCoverageOfferingBriefs
  </p>
  <p class="Code">
   &#160;&#160;&#160;; structure.
  </p>
  <p class="Code">
   &#160;&#160;&#160;FOR x=0, briefCount-1 DO BEGIN
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;PRINT, 'CoverageOfferingBrief = ', strtrim(x,2)
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;PRINT, '  name             = ', briefStruct[x].name
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;; Add the name to the string array.
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;arrName = [arrName, briefStruct[x].name]
  </p>
  <p class="Code">
   &#160;&#160;&#160;ENDFOR
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; Strip out empty string element.
  </p>
  <p class="Code">
   &#160;&#160;&#160;arrName=arrName[1:*]
  </p>
  <p class="Code">
   &#160;&#160;&#160;PRINT, "Number of arrName elements = " $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;+ STRING(N_ELEMENTS(arrName))
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   &#160;&#160;&#160;; Call DescribeCoverage to acccess coverage details for the
  </p>
  <p class="Code">
   &#160;&#160;&#160;; first coverage in the array.
  </p>
  <p class="Code">
   &#160;&#160;&#160;covName = oWCS-&gt;DescribeCoverage(NAMES=arrName[0], $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;COUNT=numCov)
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ENDIF ELSE BEGIN
  </p>
  <p class="Code">
   &#160;&#160;&#160;void = DIALOG_MESSAGE("No information available " $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;+ "from WCS Server", /ERROR)
  </p>
  <p class="Code">
   &#160;&#160;&#160;RETURN
  </p>
  <p class="Code">
   ENDELSE
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Get coverage offering details using GetCoverageOffering method.
  </p>
  <p class="Code">
   mainStruct=oWCS-&gt;GetCoverageOffering()
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Access elements of the structure that are required for the
  </p>
  <p class="Code">
   ; GetCoverage request. This consists of coverage name, CRS,
  </p>
  <p class="Code">
   ; bounding box, time or parameter, width/height or resoution x/y,
  </p>
  <p class="Code">
   ; and format.
  </p>
  <p class="Code">
   coverageName= mainStruct.co_name
  </p>
  <p class="Code">
   crs = mainStruct.crs.request_response[0]
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Find the number of samples and lines in the full image
  </p>
  <p class="Code">
   ; from the spatial domain grid.
  </p>
  <p class="Code">
   extent = $
  </p>
  <p class="Code">
   &#160;&#160;&#160;LONG(STRSPLIT(mainStruct.spat_dom_grid.limits_env_high, $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;/EXTRACT))- $
  </p>
  <p class="Code">
   &#160;&#160;&#160;LONG(STRSPLIT(mainStruct.spat_dom_grid.limits_env_low, $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;/EXTRACT))
  </p>
  <p class="Code">
   nSamples=extent[0]
  </p>
  <p class="Code">
   nLines=extent[1]
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   PRINT, 'Number of samples: ', nSamples
  </p>
  <p class="Code">
   PRINT, 'Number of lines: ', nLines
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   pos1=STRSPLIT(mainStruct.spat_dom_lonlatenv[0].pos1, /extract)
  </p>
  <p class="Code">
   posDims=SIZE(pos1, /n_dimensions) ? N_ELEMENTS(pos1) : 0
  </p>
  <p class="Code">
   pos2=STRSPLIT(mainStruct.spat_dom_lonlatenv[0].pos2, /extract)
  </p>
  <p class="Code">
   bbox=''
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   IF (posDims EQ 2) THEN BEGIN
  </p>
  <p class="Code">
   bbox = pos1[0] + ',' + $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;&#160;pos1[1] + ',' + $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;&#160;pos2[0] + ',' + $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;&#160;pos2[1]
  </p>
  <p class="Code">
   ENDIF
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   IF (posDims EQ 3) THEN BEGIN
  </p>
  <p class="Code">
   bbox = pos1[0] + ',' + $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;&#160;pos1[1] + ',' + $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;&#160;pos1[2] + ',' + $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;&#160;pos2[0] + ',' + $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;&#160;pos2[1] + ',' + $
  </p>
  <p class="Code">
   &#160;&#160;&#160;&#160;&#160;&#160;&#160;pos2[2]
  </p>
  <p class="Code">
   ENDIF
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   format=mainStruct.formats[0]
  </p>
  <p class="Code">
   PRINT, 'format = ' + string(format)
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Hard-code width and height.
  </p>
  <p class="Code">
   width = '1000'
  </p>
  <p class="Code">
   height = '1000'
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Create coverage query string of required key-value pairs.
  </p>
  <p class="Code">
   queryString = 'Coverage=' + coverageName
  </p>
  <p class="Code">
   queryString = queryString + '&amp;CRS=' + crs
  </p>
  <p class="Code">
   queryString = queryString + '&amp;BBOX=' + bbox
  </p>
  <p class="Code">
   queryString = queryString + '&amp;FORMAT=' + format
  </p>
  <p class="Code">
   queryString = queryString + '&amp;WIDTH=' + width
  </p>
  <p class="Code">
   queryString = queryString + '&amp;HEIGHT=' + height
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   dataFile = oWCS-&gt;GetCoverage(queryString[0])
  </p>
  <p class="Code">
   PRINT, "file written to " + dataFile
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   data = READ_IMAGE(dataFile)
  </p>
  <p class="Code">
   IIMAGE, data, /ORDER
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   ; Cleanup.
  </p>
  <p class="Code">
   OBJ_DESTROY, oWcs
  </p>
  <p class="Code">
   &#160;
  </p>
  <p class="Code">
   END
  </p>
  <h2 class="API">
   <a name="objects_network_1009015_1390198">
   </a>
   <a name="objects_network_1009015_61210">
   </a>
   Version History
  </h2>
  <table style="width: 499px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
   <col width="91px" />
   <col width="408px" />
   <tbody>
    <tr>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
      <p>
       6.4
      </p>
     </td>
     <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
      <p>
       Introduced
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 class="API">
   <a name="objects_network_1009015_1385317">
   </a>
   <a name="objects_network_1009015_43784">
   </a>
   See Also
  </h2>
  <p>
   <a class="MCXref_Heading_0" href="IDLnetOGCWCS__GetCoverag1.html#objects_network_1009015_1385325">
    IDLnetOGCWCS::GetCoverageOffering
   </a>
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>